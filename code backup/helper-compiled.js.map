{"version":3,"sources":["helper.js"],"names":[],"mappings":"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","file":"helper-compiled.js","sourcesContent":["'use strict';\r\n\r\nconst FB = require('./facebook.js');\r\nconst Config = require('./../config/const.js');\r\nconst Search = require('./logics.js');\r\nconst Mappings = require('./mapping.js');\r\nconst lContext = require('./localContexts.js');\r\nconst Sessions = require('./sessions.js');\r\nconst ModelNames = require('./modelNames.js');\r\nvar request = require('request');\r\nconst fetch = require('node-fetch');\r\nconst Messages = require('./messages.js');\r\nconst func = require('./functions.js');\r\n\r\n//helper functions\r\nconst firstEntityValue = (entities, entity) => {\r\n    const val = entities && entities[entity] &&\r\n        Array.isArray(entities[entity]) &&\r\n        entities[entity].length > 0 &&\r\n        entities[entity][0].value;\r\n    if (!val) {\r\n        return null;\r\n    }\r\n    return typeof val === 'object' ? val.value : val;\r\n};\r\nfunction findBetterAttribute(compare_result, field) {\r\n    console.log(field, compare_result[0][field], compare_result[1][field]);\r\n    if(field != 'price') {\r\n        if (compare_result[0][field] == compare_result[1][field]) return 0;\r\n        if (compare_result[0][field] < compare_result[1][field]) return 2;\r\n        if (compare_result[0][field] > compare_result[1][field]) return 1;\r\n    } else {\r\n        if (compare_result[0][field] == compare_result[1][field]) return 0;\r\n        if (compare_result[0][field] < compare_result[1][field]) return 1;\r\n        if (compare_result[0][field] > compare_result[1][field]) return 2;\r\n    }\r\n}\r\n\r\nfunction isKeyExists(key, json) {\r\n    if (!(key in json) || json[key] == null || json[key] == undefined) return false;\r\n    return true;\r\n}\r\nfunction allEntityValue(entities, entity) {\r\n    const array_val = entities && entities[entity] &&\r\n        Array.isArray(entities[entity]) &&\r\n        entities[entity].length > 0 &&\r\n        entities[entity];\r\n\r\n    if (!array_val) {\r\n        return null;\r\n    }\r\n\r\n    var list = [];\r\n    for(var i=0;i<array_val.length;i++) {\r\n        var val = array_val[i].value;\r\n        if(typeof val === 'object') val = val.value;\r\n        list.push(val);\r\n    }\r\n    return list;\r\n}\r\nfunction squash(arr) {\r\n    var tmp = [];\r\n    for (var i = 0; i < arr.length; i++) {\r\n        if (tmp.indexOf(arr[i]) == -1) {\r\n            tmp.push(arr[i]);\r\n        }\r\n    }\r\n    return tmp;\r\n}\r\nfunction storeValInContext(context, key, value, sessionId) {\r\n    context[key] = value;\r\n    lContext.storeNewKey(sessionId, key, value);\r\n    return context;\r\n}\r\nvar sort_by = function (field, reverse, primer) {\r\n\r\n    var key = primer ? function (x) {\r\n        return primer(x[field]);\r\n    } : function (x) {\r\n        return x[field];\r\n    };\r\n\r\n    reverse = !reverse ? 1 : -1;\r\n\r\n    return function (a, b) {\r\n        return a = key(a), b = key(b), reverse * ((a > b) - (b > a));\r\n    };\r\n};\r\nfunction isSuperSet(a, b) {\r\n    for (var i in a) {\r\n        if (b.indexOf(a[i]) < 0) return false;\r\n    }\r\n    return true;\r\n}\r\nfunction areKeysExists(a, b) {\r\n    for (var i in a) {\r\n        if (!isKeyExists(a[i], b)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction jsonConcat(o1, o2) {\r\n    var o3 = {};\r\n    if (o1 != undefined) {\r\n        var keys = [];\r\n        for (var j in o1) {\r\n            keys.push(j);\r\n        }\r\n        for (var j in keys) {\r\n            var key = keys[j];\r\n            var value = o1[key];\r\n            o3[key] = value;\r\n        }\r\n    }\r\n\r\n    if (o2 != undefined) {\r\n        var keys = [];\r\n        for (var j in o2) {\r\n            keys.push(j);\r\n        }\r\n        for (var j in keys) {\r\n            var key = keys[j];\r\n            var value = o2[key];\r\n            o3[key] = value;\r\n        }\r\n    }\r\n    return o3;\r\n}\r\nfunction addFieldsToList(data) {\r\n    var data3 = [];\r\n\r\n    for (var j in data) {\r\n        var obj = {};\r\n        obj[\"fields\"] = data[j];\r\n        data3.push(obj);\r\n    }\r\n    return data3;\r\n}\r\nfunction extractFieldsFromList(data) {\r\n    // console.log(\"extract sku from data : \" , data[0]);\r\n    var list = [];\r\n    for (var i = 0; i < data.length; i++)\r\n        list.push(data[i][\"fields\"]);\r\n    return list;\r\n}\r\nfunction separateKeyValueSKU(data, keys,start,end) {\r\n    var output = \"\";\r\n    for (var i = start; i < end; i++) {\r\n        var key = Mappings.doesSKUKeyExists(keys[i]) ? Mappings.getSKUKey(keys[i]) : keys[i];\r\n        var units = Mappings.isUnitExists(keys[i])?  Mappings.getUnitKey(keys[i]) : \"\";\r\n        output += key + \" : \" + data[keys[i]] + \" \" + units + \"\\n\";\r\n    }\r\n    return output;\r\n}\r\nfunction featurePrefMessage(sessionId,source) {\r\n    var messages = [];\r\n    lContext.storeNewKey(sessionId, \"prev_message\", \"specPrefMessage\");\r\n    var features = [\"Camera\", \"Display\", \"Battery\", \"Performance\", \"Memory\", \"All\"];\r\n    var featureMsg = \"\";\r\n    for (var i = 0; i < features.length; i++)\r\n        featureMsg += i + 1 + \". \" + features[i] + \"\\n\";\r\n\r\n    lContext.storeNewKey(sessionId, \"feature_list\", features);\r\n\r\n    if(source == \"fb\") {\r\n        messages.push({ type: \"text\", message: \"Which of the following features is most important to you ? \" +\r\n                    \"Pick the corresponding\" + \" number. \" });\r\n        messages.push({ type: \"text\", message: featureMsg });\r\n\r\n    } else {\r\n        var message = {};\r\n        message[\"header\"] = \"Pick either 1 or 2 most important features among the following \";\r\n        message[\"checklist\"] = features;\r\n        message[\"max_select\"] = 2;\r\n        messages.push({type: \"checkList\", message: message});\r\n    }\r\n    lContext.deleteKey(sessionId, \"brandPrefMessage\");\r\n    return messages;\r\n}\r\n\r\nfunction addPrevQuery(sessionId, spec_query, filter, prev_spec_query, prev_filter) {\r\n\r\n    var output = {};\r\n\r\n    // Merging spec_queries\r\n    var prev_query = prev_spec_query.bool;\r\n    var present_query = spec_query.bool;\r\n\r\n    console.log(prev_query,present_query);\r\n    var new_query_must_list = [];\r\n    var new_query_must_not_list = [];\r\n\r\n    if ( prev_query &&prev_query.must != undefined) {\r\n        var list = prev_query.must;\r\n        for (var i = 0; i < list.length; i++) new_query_must_list.push(list[i]);\r\n    }\r\n\r\n    console.log(\"must prev query\")\r\n    if ( present_query && present_query.must != undefined) {\r\n        var list = present_query.must;\r\n        for (var i = 0; i < list.length; i++) new_query_must_list.push(list[i]);\r\n    }\r\n\r\n    if ( prev_query && prev_query.must_not != undefined) {\r\n        var list = prev_query.must_not;\r\n        for (var i = 0; i < list.length; i++) new_query_must_not_list.push(list[i]);\r\n    }\r\n\r\n    if ( present_query && present_query.must_not != undefined) {\r\n        var list = present_query.must_not;\r\n        for (var i = 0; i < list.length; i++) new_query_must_not_list.push(list[i]);\r\n    }\r\n\r\n    var obj = {};\r\n    if (new_query_must_list.length > 0) obj[\"must\"] = new_query_must_list;\r\n    if (new_query_must_not_list.length > 0) obj[\"must_not\"] = new_query_must_not_list;\r\n\r\n    spec_query = {};\r\n    spec_query[\"bool\"] = obj;\r\n    console.log(\"spec query generated\",spec_query);\r\n\r\n    var added_filters_list = [];\r\n\r\n    if (prev_filter && isKeyExists(\"and\", prev_filter)) {\r\n        var list = prev_filter[\"and\"];\r\n        for (var i = 0; i < list.length; i++) {\r\n            added_filters_list.push(list[i]);\r\n        }\r\n    } else {\r\n        added_filters_list.push(prev_filter);\r\n    }\r\n\r\n    if (filter && isKeyExists(\"and\", filter)) {\r\n        var list = filter[\"and\"];\r\n        for (var i = 0; i < list.length; i++) {\r\n            added_filters_list.push(list[i]);\r\n        }\r\n    } else {\r\n        added_filters_list.push(filter);\r\n    }\r\n\r\n    filter = {};\r\n    filter[\"and\"] = added_filters_list;\r\n\r\n    output[\"query\"] = spec_query;\r\n    output[\"filter\"] = filter;\r\n    return output;\r\n}\r\n\r\nfunction storePrevQuery(sessionId, spec_sort, spec_query, filter) {\r\n    var localContext =  lContext.userContext(sessionId);\r\n    var obj = {};\r\n    if(spec_sort  == undefined) spec_sort  = {};\r\n    if(spec_query == undefined) spec_query = {};\r\n    if(filter == undefined) filter ={};\r\n    obj[\"spec_sort\"] = spec_sort;\r\n    obj[\"spec_query\"] = spec_query;\r\n    obj[\"filter\"] = filter;\r\n    lContext.storeNewKey(sessionId, \"prev_list_query\", obj);\r\n    console.log(\"stored prev key: \", JSON.stringify(localContext[\"prev_list_query\"]));\r\n}\r\n\r\nfunction breakMessagesForFacebook(messages,delim) {\r\n    var send_message_list = [];\r\n    for(var i=0;i<messages.length;i++){\r\n        var single_message = messages[i];\r\n        if(single_message[\"type\"] == \"text\") {\r\n            var message = single_message[\"message\"];\r\n            if (message.length > 320) {\r\n\r\n                var split_message_list = message.split(delim);\r\n                var generate_message = \"\";\r\n                for (var j = 0; j < split_message_list.length; j++) {\r\n                    if ((generate_message + split_message_list[j] + delim).length < 320) {\r\n                        generate_message += split_message_list[j] + delim;\r\n                    } else {\r\n                        send_message_list.push({type: \"text\", message: generate_message});\r\n                        generate_message = split_message_list[j] + delim;\r\n                    }\r\n                }\r\n                send_message_list.push({ type: \"text\", message:generate_message});\r\n\r\n            } else\r\n                send_message_list.push({type: \"text\", message: message});\r\n        }else {\r\n            send_message_list.push(single_message);\r\n        }\r\n    }\r\n    return send_message_list;\r\n}\r\nfunction makeListFBFormat(phoneArray) {\r\n\r\n    var elements = [];\r\n    // for FB Message sending\r\n    var j = 65;\r\n    for (let i = 0; i < phoneArray.length; i++) {\r\n\r\n        var singleObject = {};\r\n        singleObject.title = i + 1 + \".\" + \" \" + phoneArray[i][\"fields\"][\"model_name\"][0];\r\n        singleObject.image_url = phoneArray[i][\"fields\"][\"pics_urls\"][0];\r\n        singleObject.subtitle = \"Rs. \" + phoneArray[i][\"fields\"][\"price\"][0];\r\n        var buttons = [];\r\n        var buy_item_obj = {};\r\n        buy_item_obj.type = \"web_url\";\r\n        buy_item_obj.url = phoneArray[i][\"fields\"][\"purchase_url\"][0];\r\n        buy_item_obj.title = \"Buy item\";\r\n        buttons.push(buy_item_obj);\r\n        singleObject.buttons = buttons;\r\n        elements.push(singleObject);\r\n    }\r\n    return elements;\r\n}\r\n\r\nfunction addDirectEntitiesToContext(context, entities, sessionId) {\r\n    // Start of direct entities context\r\n\r\n    var preference = firstEntityValue(entities,\"preference\");\r\n    if(preference) context = storeValInContext(context,\"preference\",preference,sessionId);\r\n\r\n    var pos_expr = firstEntityValue(entities,\"pos_expressions\");\r\n    if(pos_expr) context = storeValInContext(context,\"pos_expressions\",pos_expr,sessionId);\r\n\r\n    var greetings = firstEntityValue(entities,\"greet\");\r\n    if(greetings) context =  storeValInContext(context,\"greet\",greetings,sessionId);\r\n\r\n    var list_synonyms = firstEntityValue(entities,\"list_synonyms\");\r\n    if(list_synonyms) context =  storeValInContext(context,\"list_synonyms\",list_synonyms,sessionId);\r\n\r\n    var mobile = firstEntityValue(entities,\"mobile\");\r\n    if(mobile) context= storeValInContext(context,\"mobile\",mobile,sessionId);\r\n\r\n    var profanity = firstEntityValue(entities,\"profanity\");\r\n    if(profanity)  context =  storeValInContext(context,\"profanity\",profanity,sessionId);\r\n\r\n    var opinion = firstEntityValue(entities,\"opinion\");\r\n    if(opinion)  context =  storeValInContext(context,\"opinion\",opinion,sessionId);\r\n\r\n    var gender = firstEntityValue(entities,\"gender\");\r\n    if(gender)  context =  storeValInContext(context,\"gender\",gender,sessionId);\r\n\r\n    var units = firstEntityValue(entities,\"units\");\r\n    if(units)  context =  storeValInContext(context,\"units\",units,sessionId);\r\n\r\n    var neg_expr = firstEntityValue(entities,\"neg_expression\");\r\n    if(neg_expr) context = storeValInContext(context,\"neg_expression\",neg_expr,sessionId);\r\n\r\n    var attribute = firstEntityValue(entities,\"attribute\");\r\n    if(attribute)  context = storeValInContext(context,\"attribute\",attribute,sessionId);\r\n\r\n    var past_release = firstEntityValue(entities,\"past_release\");\r\n    if(past_release)  context = storeValInContext(context,\"past_release\",past_release,sessionId);\r\n\r\n    var number = firstEntityValue(entities,\"number\");\r\n    if(number && processor_type)  lContext.storeNewKey(sessionId,\"processor_version\",number);\r\n\r\n    var sku = firstEntityValue(entities,\"sku\");\r\n    if(sku)  context = storeValInContext(context,\"sku\",sku,sessionId);\r\n\r\n    var os = firstEntityValue(entities,\"os\");\r\n    if(os)  context = storeValInContext(context,\"os\",os,sessionId);\r\n\r\n    var similar = firstEntityValue(entities,\"similar\");\r\n    if(similar)  context = storeValInContext(context,\"similar\",similar,sessionId);\r\n\r\n    var platforms = firstEntityValue(entities,\"platforms\");\r\n    if(platforms)  context = storeValInContext(context,\"platforms\",platforms,sessionId);\r\n\r\n    var price_range = firstEntityValue(entities,\"price_range\");\r\n    if(price_range) context = storeValInContext(context, \"price_range\", price_range,sessionId);\r\n\r\n    var clear = firstEntityValue(entities,\"clear\");\r\n    if(clear) context = storeValInContext(context,\"clear\",clear,sessionId);\r\n\r\n    var specifications = firstEntityValue(entities,\"specifications\");\r\n    if(specifications) context = storeValInContext(context,\"specifications\",specifications,sessionId);\r\n\r\n    var public_string = firstEntityValue(entities,\"public\");\r\n    if(public_string) context = storeValInContext(context,\"public\",public_string,sessionId);\r\n\r\n    var review = firstEntityValue(entities,\"review\");\r\n    if(review) context = storeValInContext(context,\"review\",review,sessionId);\r\n\r\n    var best = firstEntityValue(entities,\"best\");\r\n    if(best) context = storeValInContext(context,\"best\",best,sessionId);\r\n\r\n    var sort = firstEntityValue(entities,\"sort\");\r\n    if(sort) context = storeValInContext(context,\"sort\",sort,sessionId);\r\n\r\n    var skip = firstEntityValue(entities,\"skip\");\r\n    if(skip) context = storeValInContext(context,\"skip\",skip,sessionId);\r\n\r\n    var sim_size = firstEntityValue(entities,\"sim_size\");\r\n    if(sim_size) context = storeValInContext(context,\"sim_size\",sim_size,sessionId);\r\n\r\n    var buy = firstEntityValue(entities,\"buy\");\r\n    if(buy) context = storeValInContext(context,\"buy\",buy,sessionId);\r\n\r\n    var popular = firstEntityValue(entities,\"popular\");\r\n    if(popular) context = storeValInContext(context,\"popular\",popular,sessionId);\r\n\r\n    var stopat = firstEntityValue(entities,\"stopat\");\r\n    if(stopat) context = storeValInContext(context,\"stopat\",stopat,sessionId);\r\n\r\n    var compare = firstEntityValue(entities,\"compare\");\r\n    if(compare) { context = storeValInContext(context, \"compare\", compare,sessionId)};\r\n\r\n    var better = firstEntityValue(entities,\"better\");\r\n    if(better) context = storeValInContext(context,\"better\",better, sessionId);\r\n\r\n    var dimensions = firstEntityValue(entities,\"dimensions\");\r\n    if(dimensions) context = storeValInContext(context,\"dimensions\",dimensions,sessionId);\r\n\r\n    var num_list = firstEntityValue(entities,\"num_list\");\r\n    if(num_list) context = storeValInContext(context,\"num_list\",num_list,sessionId);\r\n\r\n    var verdict = firstEntityValue(entities,\"verdict\");\r\n    if(verdict) context = storeValInContext(context,\"verdict\",verdict,sessionId);\r\n\r\n    var sim_type = firstEntityValue(entities,\"sim_type\");\r\n    if(sim_type) context = storeValInContext(context,\"sim_type\",sim_type,sessionId);\r\n\r\n    var network_support = firstEntityValue(entities,\"network_support\");\r\n    if(network_support) context = storeValInContext(context,\"network_support\",network_support,sessionId);\r\n\r\n    var camera_features = firstEntityValue(entities,\"camera_features\");\r\n    if(camera_features) context = storeValInContext(context,\"camera_features\",camera_features,sessionId);\r\n\r\n    var gps_type = firstEntityValue(entities,\"gps_type\");\r\n    if(gps_type) context = storeValInContext(context,\"gps_type\",gps_type,sessionId);\r\n\r\n    var usb_type = firstEntityValue(entities,\"usb_type\");\r\n    if (usb_type) context = storeValInContext(context,\"usb_type\",usb_type,sessionId);\r\n\r\n    var display_type = firstEntityValue(entities,\"display_type\");\r\n    if(display_type) context = storeValInContext(context,\"display_type\",display_type,sessionId);\r\n\r\n    var gpu_type = firstEntityValue(entities,\"gpu_type\");\r\n    if(gpu_type) context = storeValInContext(context,\"gpu_type\",gpu_type,sessionId);\r\n\r\n    var processor_core_type = firstEntityValue(entities,\"processor_cores\");\r\n    if(processor_core_type) context = storeValInContext(context,\"processor_core_type\", processor_core_type,sessionId);\r\n\r\n    var battery_type = firstEntityValue(entities,\"battery_type\");\r\n    if(battery_type) context = storeValInContext(context,\"battery_type\",battery_type,sessionId);\r\n\r\n    var audio_formats = firstEntityValue(entities,\"audio_formats\");\r\n    if(audio_formats) context = storeValInContext(context,\"audio_formats\",audio_formats,sessionId);\r\n\r\n    var screen_protection = firstEntityValue(entities,\"screen_protection\");\r\n    if(screen_protection) context = storeValInContext(context,\"screen_protection\",screen_protection,sessionId);\r\n\r\n    var sensor_type = firstEntityValue(entities,\"sensor_type\");\r\n    if(sensor_type) context = storeValInContext(context,\"sensor_type\",sensor_type,sessionId);\r\n\r\n    var processor_type = firstEntityValue(entities,\"processor_type\");\r\n    if(processor_type) context = storeValInContext(context,\"processor_type\",processor_type,sessionId);\r\n\r\n    var phone_properties = firstEntityValue(entities,\"phone_properties\");\r\n    if(phone_properties) context = storeValInContext(context,\"phone_properties\",phone_properties,sessionId);\r\n\r\n    var intent = firstEntityValue(entities, \"intent\");\r\n    if(intent) context = storeValInContext(context, 'intent', intent, sessionId);\r\n\r\n    var query = firstEntityValue(entities, \"query\");\r\n    if(query) context = storeValInContext(context, 'query', query, sessionId);\r\n\r\n\r\n    return context;\r\n}\r\n\r\nfunction definePriceRange(message, context, sessionId) {\r\n\r\n    var localContext = lContext.userContext(sessionId);\r\n\r\n    console.log(\"---------- before price range updation-------------\");\r\n    console.log(localContext.sessionVars);\r\n\r\n    var price_range, start, end;\r\n    price_range = isKeyExists(\"price_range\", context) ? context.price_range : \"no\";\r\n\r\n    if (price_range == 'any' && localContext.prev_message == \"priceRangeMessage\" ) {\r\n        lContext.storeNewSessionKey(sessionId, \"start_price\", 0);\r\n        lContext.storeNewSessionKey(sessionId, \"end_price\", 90000);\r\n    }\r\n\r\n    var numberList = extractPrice(message);\r\n    if (!numberList || numberList.length == 0)\r\n        return context;\r\n\r\n    numberList = squash(numberList)\r\n    start = numberList[0];\r\n    end = numberList[1];\r\n\r\n    if (price_range === 'under') {\r\n        lContext.storeNewSessionKey(sessionId, \"start_price\", 0);\r\n        lContext.storeNewSessionKey(sessionId, \"end_price\", start);\r\n    } else if (price_range === 'above') {\r\n        lContext.storeNewSessionKey(sessionId, \"start_price\", start);\r\n        lContext.storeNewSessionKey(sessionId, \"end_price\", 100000);\r\n    } else if (price_range === 'between' && numberList.length > 1) {\r\n        lContext.storeNewSessionKey(sessionId, \"start_price\", start);\r\n        lContext.storeNewSessionKey(sessionId, \"end_price\", end);\r\n    } else if (price_range === 'around') {\r\n        lContext.storeNewSessionKey(sessionId, \"start_price\", start - 4000);\r\n        lContext.storeNewSessionKey(sessionId, \"end_price\", start + 4000);\r\n    } else if( price_range == \"no\" && start){\r\n        lContext.storeNewSessionKey(sessionId, \"start_price\", start - 4000);\r\n        lContext.storeNewSessionKey(sessionId, \"end_price\", start + 4000);\r\n    }\r\n\r\n    console.log(\"---------- after  price range updation-------------\");\r\n    console.log(localContext.sessionVars);\r\n    return context;\r\n}\r\n\r\nfunction getSpecFeatures(entities) {\r\n\r\n    var feature_array = entities && entities[\"features\"] &&\r\n        Array.isArray(entities[\"features\"]) &&\r\n        entities[\"features\"].length > 0 &&\r\n        entities[\"features\"];\r\n\r\n\r\n    var attribute_array = entities && entities[\"attribute\"] &&\r\n        Array.isArray(entities[\"attribute\"]) &&\r\n        entities[\"attribute\"].length > 0 &&\r\n        entities[\"attribute\"];\r\n\r\n\r\n    var price_range = entities && entities[\"price_range\"] &&\r\n        Array.isArray(entities[\"price_range\"]) &&\r\n        entities[\"price_range\"].length > 0 &&\r\n        entities[\"price_range\"];\r\n\r\n\r\n    if (!feature_array && !attribute_array && !price_range) {\r\n        return null;\r\n    }\r\n    var spec_array = [];\r\n    if(feature_array) spec_array = spec_array.concat(feature_array);\r\n    if(attribute_array) spec_array = spec_array.concat(attribute_array);\r\n    if(price_range) spec_array = spec_array.concat(price_range);\r\n\r\n\r\n    for(var i = 0; i < spec_array.length; i++) {\r\n        var val = spec_array[i].value;\r\n        if(typeof val === 'object') val = val.value;\r\n        if(val == \"camera\") return 1;\r\n        if(val == \"display\") return 2;\r\n        if(val == \"battery\") return 3;\r\n        if(val == \"performance\") return 4;\r\n        if(val == \"memory\") return 5;\r\n        if(val == \"any\") return 6;\r\n    }\r\n    return null;\r\n}\r\nfunction checkEntities(message, context, sessionId,entities, callback) {\r\n\r\n    var localContext = lContext.userContext(sessionId);\r\n    var numList = extractIntegers(message);\r\n\r\n    if ((isKeyExists(\"compare\", context) || isKeyExists(\"better\", context)) &&\r\n        !isKeyExists(\"sku1\", context) && !isKeyExists(\"sku2\", context)) {\r\n\r\n        if (isKeyExists(\"prev_list\", localContext) && numList) {\r\n            if (numList.length >= 2) {\r\n                var sku1 = getSKUFromSelector(context, sessionId, numList[0]);\r\n                var sku2 = getSKUFromSelector(context, sessionId, numList[1]);\r\n                if(sku1 != \"no\") {\r\n                    context = storeValInContext(context, \"sku1\", sku1, true);\r\n                    lContext.storeNewKey(sessionId,\"has_list_reference\",\"exist\");\r\n                }\r\n                if(sku != \"no\") {\r\n                    context = storeValInContext(context, \"sku2\", sku2, true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (isKeyExists(\"prev_list\", localContext) && localContext[\"prev_list\"] != \"all_phone_list\" &&\r\n        !isKeyExists(\"units\", context) && !isKeyExists(\"mobile\", context) &&\r\n        !isKeyExists(\"better\", context) && !isKeyExists(\"compare\", context) &&\r\n        !isKeyExists(\"sku\", context)) {\r\n\r\n        console.log(\"finding single sku through numbers\");\r\n        if (numList && numList.length != 0 && numList[0] < 8 && !isKeyExists(\"units\", context)) {\r\n            var sku = getSKUFromSelector(context, sessionId, numList[0]);\r\n            if(sku != \"no\") {\r\n                context = storeValInContext(context, \"sku\", sku, sessionId);\r\n                lContext.storeNewKey(sessionId,\"has_list_reference\",\"exist\");\r\n            }\r\n        }\r\n\r\n        if (isKeyExists(\"num_list\", context) && !isKeyExists(\"units\", context)) {\r\n            var selector = Mappings.doesHaveAlphabet(context.num_list) ?\r\n                Mappings.getNumberFromAlphabet(context.num_list) : -1;\r\n            sku = getSKUFromSelector(context, sessionId, selector);\r\n            context = storeValInContext(context, \"sku\", sku,sessionId);\r\n        }\r\n    }\r\n\r\n\r\n    if (numList && numList.length != 0 && isKeyExists(\"units\", context)) {\r\n        console.log(\"attribute quantity detected..\");\r\n        context = storeValInContext(context, \"attribute_quantity\", numList[0], true);\r\n    }\r\n\r\n    if (localContext[\"prev_message\"] == \"brandPrefMessage\") {\r\n\r\n        lContext.deleteKey(sessionId, \"prev_message\");\r\n        delete context.brand;\r\n        var all_brand_list = allEntityValue(entities,\"brand\");\r\n        console.log(all_brand_list);\r\n        if(all_brand_list && all_brand_list.length > 0){\r\n            context = storeValInContext(context, \"session_variable\", \"brand_pref\",sessionId);\r\n            lContext.storeNewSessionKey(sessionId, \"brand_pref\", all_brand_list);\r\n            context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n        }\r\n        else if(numList && numList.length != 0 ) {\r\n            context = deleteBrands(sessionId, numList, context);\r\n            context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n        }\r\n    }\r\n\r\n    if ( numList && numList.length != 0 &&localContext[\"prev_message\"] == \"specPrefMessage\") {\r\n       // var featureNumber = getSpecFeatures(entities);\r\n       console.log(numList);\r\n        var feature_list = localContext[\"feature_list\"];\r\n        numList.sort();\r\n        var featurePrefList = [];\r\n        for(var k=0; k < numList.length; k++) {\r\n            var featureNumber =  numList[k];\r\n            if (featureNumber == 6) {\r\n                featurePrefList = [\"overall\"];\r\n            }else {\r\n                featurePrefList.push(feature_list[featureNumber]);\r\n            }\r\n        }\r\n        lContext.storeNewSessionKey(sessionId, \"feature_pref\",featurePrefList );\r\n        context = storeValInContext(context, \"session_variable\", \"feature_pref\", sessionId);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n\r\n    }\r\n\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"agePrefMessage\") {\r\n        lContext.deleteKey(sessionId, \"prev_message\");\r\n        context = storeValInContext(context,\"age\",numList[0],sessionId,false);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (isKeyExists(\"yes_no\", context) && localContext[\"prev_message\"] == \"listQuestMessage\") {\r\n        context = storeValInContext(context, \"prev_list_answer\", context.yes_no, true);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (isKeyExists(\"preference\", context) && localContext[\"prev_message\"] == \"front_camera_pref\") {\r\n        lContext.storeNewSessionKey(sessionId,\"front_camera_pref\",context.preference);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (isKeyExists(\"preference\", context) && localContext[\"prev_message\"] == \"video_recording_pref\") {\r\n        lContext.storeNewSessionKey(sessionId,\"video_recording_pref\",context.preference);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (isKeyExists(\"preference\", context) && localContext[\"prev_message\"] == \"photo_storage_pref\") {\r\n        lContext.storeNewSessionKey(sessionId,\"photo_storage_pref\",context.preference);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n\r\n    }\r\n\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"gaming\") {\r\n        context = storeValInContext(context,\"preference\",\"gaming\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"gaming\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"app_running\") {\r\n        context = storeValInContext(context,\"preference\",\"app_running\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"app_running\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"spend_time\") {\r\n        context = storeValInContext(context,\"preference\",\"spend_time\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"spend_time\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"network_type\") {\r\n        context = storeValInContext(context,\"preference\",\"network_type\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"network_type\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"spend_time_battery\") {\r\n        context = storeValInContext(context,\"preference\",\"spend_time_battery\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"spend_time_battery\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if(numList && numList.length !=0 && localContext[\"prev_message\"] == \"relevant_internal_memory\"){\r\n        context = storeValInContext(context,\"preference\",\"relevant_internal_memory\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"relevant_internal_memory\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n    if(numList && numList.length !=0 && localContext[\"prev_message\"] == \"micro_sd_card_cost\"){\r\n        context = storeValInContext(context,\"preference\",\"micro_sd_card_cost\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"micro_sd_card_cost\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if (localContext[\"prev_message\"] == \"after_battery_important\") {\r\n        context = storeValInContext(context,\"preference\",\"after_battery_important\",sessionId);\r\n        if(isKeyExists(\"features\",context))\r\n            lContext.storeNewSessionKey(sessionId,\"after_battery_important\",context.features);\r\n        else\r\n            lContext.storeNewSessionKey(sessionId,\"after_battery_important\",\"nothing\");\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n\r\n    if (isKeyExists(\"preference\", context) && localContext[\"prev_message\"] == \"record_videos\") {\r\n        lContext.storeNewSessionKey(sessionId,\"record_videos\",context.preference);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"after_camera_important\") {\r\n        context = storeValInContext(context,\"preference\",\"after_camera_important\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"after_camera_important\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"frequent_use_activity\") {\r\n        context = storeValInContext(context,\"preference\",\"frequent_use_activity\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"frequent_use_activity\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n    if (numList && numList.length != 0 && localContext[\"prev_message\"] == \"use_phone_light\") {\r\n        context = storeValInContext(context,\"preference\",\"use_phone_light\",sessionId);\r\n        lContext.storeNewSessionKey(sessionId,\"use_phone_light\",numList);\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if ( localContext[\"prev_message\"] == \"priceRangeMessage\" && isKeyExists(\"start_price\",localContext.sessionVars)) {\r\n        lContext.deleteKey(sessionId, \"prev_message\");\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    if(isKeyExists(\"skip\",context)){\r\n        if(!isKeyExists(\"brand_pref\",localContext.sessionVars))\r\n            lContext.storeNewSessionKey(sessionId,\"brand_pref\",[]);\r\n        if(!isKeyExists(\"feature_pref\",localContext.sessionVars))\r\n            lContext.storeNewSessionKey(sessionId,\"feature_pref\",\"overall\");\r\n        delete context.skip;\r\n        context = jsonConcat(context, localContext[\"prev_user_question\"]);\r\n    }\r\n\r\n    var preFunction = isKeyExists(\"preFunction\", localContext) ? localContext[\"preFunction\"] : null;\r\n    console.log(\"Prev function : \" + preFunction);\r\n    var functionMap = func.getFunctionMap(preFunction);\r\n\r\n    if (functionMap != null) {\r\n        functionMap.sort(function (a, b) {\r\n            return b[0].length - a[0].length;\r\n        });\r\n\r\n        for (var i = 0; i < functionMap.length; i++) {\r\n            var leftKeys = functionMap[i][0];\r\n            var rightKeys = functionMap[i][1];\r\n\r\n            if (areKeysExists(leftKeys, context)) {\r\n                var validFunction = func.getFunctionName(context);\r\n                console.log(\"matched function: \", validFunction);\r\n\r\n\r\n                if (validFunction != null) {\r\n                    var validKeys = func.getFunctionKeys(validFunction)[0];\r\n                    var isSuperset = validKeys.every(function (val) {\r\n                        return leftKeys.indexOf(val) >= 0;\r\n                    });\r\n                    if (isSuperset) {\r\n                        var json2 = {};\r\n                        for (var j = 0; j < rightKeys.length; j++) {\r\n                            json2[rightKeys[j]] = localContext[rightKeys[j]];\r\n                        }\r\n                        console.log(\"adding To function : \", json2);\r\n                        context = jsonConcat(context, json2);\r\n                    }\r\n                } else {\r\n                    var json2 = {};\r\n                    for (var j = 0; j < rightKeys.length; j++) {\r\n                        json2[rightKeys[j]] = localContext[rightKeys[j]];\r\n                    }\r\n                    console.log(\"adding To function: \", json2);\r\n                    context = jsonConcat(context, json2);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    callback && callback(context);\r\n}\r\n\r\nfunction getSKUFromSelector(context, sessionId, position) {\r\n    var localContext = lContext.userContext(sessionId);\r\n    var prev_list = localContext[\"prev_total_list\"];\r\n    console.log(\" prev list  \",typeof  prev_list +\"  \" + prev_list.length );\r\n    console.log(\" alphabet \" ,position);\r\n    if(position > 0) {\r\n        var sku = prev_list[position - 1][\"fields\"][\"model_name\"][0];\r\n        console.log(\" sku name \", sku);\r\n        return sku;\r\n    }\r\n    return \"no\"\r\n}\r\n\r\nfunction getSKUAlias(message, callback) {\r\n    var aliases = [];\r\n    var skuList = [];\r\n    var indexList = [];\r\n    var findAliasList = [];\r\n\r\n    Search.getAliases(function (data) {\r\n        var new_data = data.hits.hits;\r\n        var model_name = new_data[0][\"fields\"][\"model_name\"][0];\r\n        var alias = eval('(' + new_data[0][\"fields\"][\"alias\"][0] + ')');\r\n\r\n        for (var i = 0; i < new_data.length; i++) {\r\n            var obj = {};\r\n            var model = new_data[i][\"fields\"][\"model_name\"][0];\r\n\r\n            obj[\"model_name\"] = model;\r\n            var ali = eval('(' + new_data[i][\"fields\"][\"alias\"][0] + ')');\r\n            obj[\"alias\"] = ali;\r\n\r\n            aliases.push(obj);\r\n        }\r\n\r\n        var matched_alias_list = [];\r\n        for (var i in aliases) {\r\n            var model = aliases[i];\r\n            var found_sku_alias_list = [];\r\n            for (var j in model[\"alias\"]) {\r\n                var sku_alias = model[\"alias\"][j].toLowerCase();\r\n                sku_alias = sku_alias.trim();\r\n                var index = message.indexOf(sku_alias);\r\n                if (index > -1 && sku_alias.length != 0) {\r\n                    // skuList.push(model[\"model_name\"]);\r\n                    // indexList.push(index);\r\n                    //findAliasList.push(sku_alias);\r\n                    if(message[index - 1] == \" \" || index == 0)found_sku_alias_list.push(sku_alias);\r\n                }\r\n            }\r\n            if (found_sku_alias_list.length > 0) {\r\n                var obj = {};\r\n                obj[\"model_name\"] = model[\"model_name\"];\r\n                obj[\"alias\"] = found_sku_alias_list;\r\n                matched_alias_list.push(obj);\r\n            }\r\n        }\r\n        for (var i = 0; i < matched_alias_list.length; i++) {\r\n            var alias_list = matched_alias_list[i][\"alias\"];\r\n            var max_length = -1;\r\n            for (var j = 0; j < alias_list.length; j++) {\r\n                if (alias_list[j].length > max_length)\r\n                    max_length = alias_list[j].length;\r\n            }\r\n            matched_alias_list[i][\"length\"] = max_length;\r\n        }\r\n\r\n        matched_alias_list = matched_alias_list.sort(sort_by(\"length\", true, null));\r\n\r\n        //var first_sku = matched_alias_list[sku_pos][\"model_name\"];\r\n\r\n        skuList = [];\r\n        var aliasList = [];\r\n        for (var i = 0; i < matched_alias_list.length; i++){\r\n            skuList.push(matched_alias_list[i][\"model_name\"]);\r\n            aliasList.push(matched_alias_list[i][\"alias\"]);\r\n        }\r\n\r\n        var output = {};\r\n        output[\"skus\"] = squash(skuList);\r\n        output[\"aliases\"] = aliasList;\r\n        callback && callback(output);\r\n    });\r\n}\r\nfunction extractIntegers(message, callback) {\r\n\r\n    message = message.replace(/,/g, \"\");\r\n    var numbers_in_text = message.match(/\\d+k?/g);\r\n    var number_list = [];\r\n    if (numbers_in_text && numbers_in_text.length > 0) {\r\n        for (var i = 0; i < numbers_in_text.length; i++) {\r\n            if (numbers_in_text[i].indexOf('k') > -1) number_list.push(parseInt(numbers_in_text[i].split('k')[0]) * 1000);\r\n            number_list.push(numbers_in_text[i] = parseInt(numbers_in_text[i]));\r\n        }\r\n        return number_list.sort();\r\n    } else return numbers_in_text;\r\n}\r\nfunction extractPrice(message, callback) {\r\n    message = message.replace(/,/g, \"\");\r\n    var numbers_in_text_with_k = message.match(/\\d+k?/g);\r\n    var numbers_in_text_with_space_k = message.match(/\\d+\\sk?/g);\r\n    var numbers_in_text_with_thousand = message.match(/([\\d.]+) *thousand/);\r\n    var numbers_in_text = [];\r\n    if (numbers_in_text_with_k) numbers_in_text = numbers_in_text.concat(numbers_in_text_with_k);\r\n    if(numbers_in_text_with_space_k) numbers_in_text = numbers_in_text.concat(numbers_in_text_with_space_k);\r\n    if (numbers_in_text_with_thousand) numbers_in_text = numbers_in_text.concat(numbers_in_text_with_thousand);\r\n    var number_list = [];\r\n    if (numbers_in_text && numbers_in_text.length > 0) {\r\n        for (var i = 0; i < numbers_in_text.length; i++) {\r\n            if (numbers_in_text[i].indexOf('k') > -1)\r\n                number_list.push(parseInt(numbers_in_text[i].split('k')[0]) * 1000);\r\n            else if (numbers_in_text[i].indexOf('thousand') > -1)\r\n                number_list.push(parseInt(numbers_in_text[i].split('k')[0]) * 1000);\r\n            else if (parseInt(numbers_in_text[i]) >= 1000 || parseInt(numbers_in_text[i]) == 0) {\r\n                number_list.push(numbers_in_text[i] = parseInt(numbers_in_text[i]));\r\n            }\r\n        }\r\n        return number_list.sort(function (a, b) {  return a - b;  });\r\n    }\r\n    return numbers_in_text;\r\n}\r\n\r\nfunction deleteBrands(sessionId, num_list, context) {\r\n\r\n    for (var i = 0; i < num_list.length; i++) {\r\n        if (num_list[i] == 0) {\r\n            context = storeValInContext(context, \"session_variable\", \"brand_pref\",sessionId);\r\n            lContext.storeNewSessionKey(sessionId, \"brand_pref\", []);\r\n            return context;\r\n        }\r\n    }\r\n\r\n    var localContext = lContext.userContext(sessionId);\r\n    var phone_list = localContext[\"prev_total_list\"];\r\n    var brandList = getBrands(phone_list);\r\n    brandList = brandList.sort(sort_by(\"count\",true,null));\r\n\r\n    console.log(\"old phone list size\", phone_list.length);\r\n\r\n    var removedBrands = [];\r\n    for (var i = 0; i < num_list.length; i++)\r\n        removedBrands.push(brandList[ num_list[i] -1 ][\"brand\"]);\r\n\r\n    removedBrands = squash(removedBrands);\r\n    var brand_pref = [];\r\n    console.log(\"removing brands,\", removedBrands);\r\n    context = storeValInContext(context, \"session_variable\", \"brand_pref\",sessionId);\r\n    lContext.storeNewSessionKey(sessionId, \"brand_pref\", removedBrands);\r\n    console.log(\"brand pref updated..\");\r\n    console.log(brand_pref);\r\n    return context;\r\n\r\n}\r\nfunction getBrands(phone_list) {\r\n\r\n    var list = phone_list;\r\n    var brands = [];\r\n    for (var i = 0; i < list.length; i++)\r\n        brands.push(list[i][\"fields\"][\"brand\"][0]);\r\n\r\n    brands = squash(brands);\r\n    var brandList = [];\r\n    for (var i = 0; i < brands.length; i++) {\r\n        var count = 0;\r\n        for (var j = 0; j < list.length; j++) {\r\n            if (brands[i] == list[j][\"fields\"][\"brand\"][0]) count++;\r\n        }\r\n        brandList.push({ id: i + 1, brand: brands[i], count: count });\r\n    }\r\n    return brandList;\r\n}\r\nfunction findAllPhonesHelper(phone_list, context, sessionId) {\r\n\r\n    var messages = [];\r\n    var localContext = lContext.userContext(sessionId);\r\n    if (phone_list.length == 0) {\r\n        lContext.deleteKey(sessionId, \"prev_list_query\");\r\n        messages.push({ type: \"text\", message: Messages.listMessage(\"notAvailable\") });\r\n        return messages;\r\n    }\r\n    lContext.storeNewKey(sessionId, \"prev_total_list\", phone_list);\r\n    lContext.storeNewKey(sessionId, \"prev_list\", \"all_phone_list\");\r\n\r\n    var brandList = getBrands(phone_list);\r\n    brandList = brandList.sort(sort_by(\"count\",true,null));\r\n\r\n    var brandMessage = \"\";\r\n    var len = brandList.length;\r\n    if (brandList.length > 9) len = 9;\r\n\r\n    for (var i = 0; i < len; i++)\r\n        brandMessage += (i+1) + \". \" + brandList[i][\"brand\"] + \"(\" + brandList[i][\"count\"] + \")\" + \"\\n\";\r\n\r\n    if (brandList.length < 4) {\r\n        lContext.storeNewKey(sessionId, \"brand_pref\", []);\r\n    }\r\n\r\n    var top_message = Messages.messageKeyValue(\"listLength\",phone_list.length);\r\n    messages.push({ type: \"text\", message: top_message });\r\n    messages.push({ type: \"text\", message: Messages.listMessage('brandPrefMessage') });\r\n    messages.push({ type: \"text\", message: brandMessage });\r\n    lContext.storeNewKey(sessionId, \"prev_message\", \"brandPrefMessage\");\r\n    lContext.deleteKey(sessionId, \"specPrefMessage\");\r\n\r\n    \r\n    return messages;\r\n}\r\n\r\nfunction sortPhoneListByKey(phone_list,sessionId,db_key){\r\n\r\n    phone_list = extractFieldsFromList(phone_list);\r\n\r\n    for(var m=0;m< phone_list.length;m++){\r\n        var pmr = parseInt(phone_list[m][db_key][0]);\r\n        phone_list[m][db_key] = pmr;\r\n    }\r\n\r\n    phone_list = phone_list.sort(sort_by(db_key,true,null));\r\n\r\n    for(var n=0;n<phone_list.length;n++){\r\n        var pmr =  phone_list[n][db_key];\r\n        var temp_list = [pmr];\r\n        phone_list[n][db_key] = temp_list;\r\n    }\r\n    phone_list = addFieldsToList(phone_list);\r\n    return phone_list;\r\n}\r\n\r\nfunction printPhoneList(phone_list, db_key){\r\n//    console.log(\"===============================\");\r\n    var message= \"\\t\\t\\t PHONE LIST LENGTH: \"+ phone_list.length +\"\\n\\t\\t\\t\";\r\n    for(var i=0;i<phone_list.length;i++){\r\n         message += phone_list[i][\"fields\"][\"model_name\"][0] + \"   \" +phone_list[i][\"fields\"][db_key][0] + \"\\n\\t\\t\\t\";\r\n    }\r\n  //  console.log(message);\r\n  //  console.log(\"=================================\");\r\n}\r\nfunction filterPhonesBasedFeatureQuest(phone_list,sessionId,db_key,percentile,arrange,use_case_preference_key){\r\n   // console.log(\" ... filter phones based feature question ... \");\r\n\r\n   // console.log(\" ==========================  before sort \" + db_key +  \" ================== \"  );\r\n    printPhoneList(phone_list,db_key);\r\n    phone_list = extractFieldsFromList(phone_list);\r\n\r\n    for(var m=0;m< phone_list.length;m++){\r\n        var aval = parseInt(phone_list[m][db_key][0]);\r\n        phone_list[m][db_key] = aval;\r\n    }\r\n\r\n    phone_list = phone_list.sort(sort_by(db_key,false,null));\r\n\r\n    var find_percentile_position_value = Math.round(phone_list.length * percentile);\r\n    var marked_attribute_value = phone_list[find_percentile_position_value][db_key];\r\n  //  console.log(\" MARKED ATTRIBUTE VALUE \" , marked_attribute_value);\r\n    var key = use_case_preference_key+\"_marked_value\";\r\n    var units = Mappings.isUnitExists(db_key) ? Mappings.getUnitKey(db_key) : \"\";\r\n    var value = marked_attribute_value + \" \" + units ;\r\n    lContext.storeNewKey(sessionId,key,value);\r\n\r\n    if(arrange == \"greater\") {\r\n        phone_list = phone_list.filter(function (data) {\r\n            return data[db_key] >= marked_attribute_value;\r\n        });\r\n    } else if ( arrange == \"lesser\"){\r\n        phone_list = phone_list.filter(function (data) {\r\n            return data[db_key] <= marked_attribute_value;\r\n        });\r\n    }\r\n\r\n    for(var n=0;n<phone_list.length;n++){\r\n        var aval =  phone_list[n][db_key];\r\n        var temp_list = [aval];\r\n        phone_list[n][db_key] = temp_list;\r\n    }\r\n\r\n    phone_list = addFieldsToList(phone_list);\r\n\r\n    //console.log(\" =========================  after sort \"+ db_key  +\" ==================\");\r\n    printPhoneList(phone_list, db_key);\r\n    return phone_list;\r\n}\r\n\r\nfunction makeReasonMessage(phone, keyList){\r\n   /* var pref_message = \"Model Name : \"+ phone_list[0][\"fields\"][\"model_name\"][0]+ \"\\n\"\r\n        + \"Primary camera resolution : \"+ phone_list[0][\"fields\"][\"primary_camera_resolution\"][0]+\"  \" +\r\n        Mappings.getUnitKey(\"primary_camera_resolution\") + \"\\n\"\r\n        + \"Front camera resolution : \"+ phone_list[0][\"fields\"][\"front_camera_resolution\"][0]+ \"  \" +\r\n        Mappings.getUnitKey(\"front_camera_resolution\") +\"\\n\"\r\n        + \"Primary camera features : \" + phone_list[0][\"fields\"][\"primary_camera_features\"][0] + \"  \" +\r\n        Mappings.getUnitKey(\"primary_camera_features\") +\"\\n\"\r\n        + \"Video resolution : \" +  phone_list[0][\"fields\"][\"video_resolution\"][0] + \"  \" +\r\n        Mappings.getUnitKey(\"video_resolution\") +\"\\n\";*/\r\n\r\n    var pref_message = \"\" ;\r\n    for(var i=0;i<keyList.length;i++){\r\n        var key = keyList[i];\r\n        var skuKey =  Mappings.doesSKUKeyExists(key) ? Mappings.getSKUKey(key) : key ;\r\n        pref_message +=  skuKey + \" : \" + phone[\"fields\"][key][0] +\" \" + Mappings.getUnitKey(key) +\" \\n\";\r\n    }\r\n    return pref_message;\r\n}\r\nfunction filterBrandPref(phone_list, source, sessionId,feature,number) {\r\n\r\n    var localContext = lContext.userContext(sessionId);\r\n\r\n    console.log(\" ===============filter brand pref =================== \");\r\n    console.log(localContext.sessionVars);\r\n    console.log(\"LENGTH : \", phone_list.length);\r\n    console.log(feature);\r\n    var messages = [];\r\n    if(phone_list.length == 0){\r\n        messages.push({ type: \"text\", message: Messages.listMessage(\"notAvailable\") });\r\n        lContext.deleteKey(sessionId, \"prev_list_query\");\r\n        lContext.deleteKey(sessionId, \"prev_list\");\r\n        return messages;\r\n    }\r\n\r\n    for(var i=0;i<phone_list.length;i++){\r\n        var id = phone_list[i][\"_id\"];\r\n        var fields = phone_list[i][\"fields\"];\r\n        fields[\"id\"] = [id];\r\n    }\r\n\r\n   // console.log(phone_list[0]);\r\n    var use_case_questions = Messages.hasUseCaseQuests(feature) ? Messages.getUseCaseQuestions(feature) : {};\r\n    var use_case_preference_key_list = Object.keys(use_case_questions);\r\n    var use_case_preference_key;\r\n    var user_answer;\r\n    var relevant_attribute;\r\n    var pref_message;\r\n    var reason_message;\r\n    if(feature == \"camera\") {\r\n        for (var k = 0; k < use_case_preference_key_list.length; k++) {\r\n            use_case_preference_key = use_case_preference_key_list[k];\r\n            user_answer =  localContext[\"sessionVars\"][use_case_preference_key];\r\n            var percentile;\r\n            if(user_answer == \"agree\") percentile = 0.45;\r\n            else if(user_answer == \"neutral\") percentile = 0.25;\r\n            else percentile = 0.01;\r\n\r\n            if(percentile != 0.01) {\r\n                if (use_case_preference_key == \"front_camera_pref\") {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId,\r\n                        \"primary_camera_resolution\", percentile, \"greater\",use_case_preference_key);\r\n                }\r\n                if (use_case_preference_key == \"video_recording_pref\") {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId,\r\n                        \"video_resolution\", percentile, \"greater\",use_case_preference_key);\r\n                }\r\n                if (use_case_preference_key == \"photo_storage_pref\") {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId,\r\n                        \"internal_memory\", percentile, \"greater\",use_case_preference_key);\r\n                }\r\n            }\r\n        }\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"camera_score\");\r\n        var keyList = [\"model_name\",\"primary_camera_resolution\",\"front_camera_resolution\",\"primary_camera_features\",\"video_resolution\"];\r\n        console.log(\"before maker reason message\");\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        console.log(\"after making reason message\");\r\n        reason_message=\" Camera list: \\n List is sorted based on camera, camera expert reviews and also as per your\" + \" preferences  with \" ;\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            var use_case_preference_key = use_case_preference_key_list[k];\r\n            var key = use_case_preference_key + \"_marked_value\";\r\n            if( use_case_preference_key == \"front_camera_pref\" && isKeyExists(key,localContext)){\r\n                reason_message += \" front camera resolution \"+ localContext[key] ;\r\n            }\r\n            if( use_case_preference_key == \"video_recording_pref\" && isKeyExists(key,localContext)){\r\n                reason_message += \" video resolution > \"+ localContext[key] + \" and \";\r\n            }\r\n            if( use_case_preference_key == \"photo_storage_pref\" && isKeyExists(key,localContext)){\r\n                reason_message += \"phone storage > \"+ localContext[key] + \" \";\r\n            }\r\n        }\r\n        reason_message += \" in the given price range. \";\r\n    }\r\n    else if(feature == \"performance\"){\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            use_case_preference_key = use_case_preference_key_list[k];\r\n            var user_answer_list = localContext[\"sessionVars\"][use_case_preference_key];\r\n            var percentile;\r\n            if( use_case_preference_key == \"gaming\"){\r\n                var max =  Math.max(user_answer_list);\r\n                if(max == 0)percentile = 0.25;\r\n                else if(max == 1)percentile = 0.50;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  gaming \", percentile);\r\n                if(percentile != 0.01)\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list,sessionId,\"gpu_rank\",percentile,\"lesser\", use_case_preference_key);\r\n            }\r\n            if( use_case_preference_key == \"app_running\"){\r\n                var max =  Math.max(user_answer_list);\r\n                console.log(\" MAX VALUE\",max);\r\n                if(max == 0|| max == 1 || max == 2) percentile = 0.01;\r\n                else if(max == 3) percentile = 0.30;\r\n                else if(max == 4)percentile = 0.60;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  app running \", percentile);\r\n                if(percentile != 0.01)\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list,sessionId,\"ram_memory\",percentile,\"greater\", use_case_preference_key);\r\n            }\r\n            if( use_case_preference_key == \"spend_time\"){\r\n                var max =  Math.max(user_answer_list);\r\n                if(max == 0)percentile = 0.40;\r\n                else if(max == 1 || max == 2)percentile = 0.20;\r\n                else if(max == 3 || max == 4 || max == 5) percentile = 0.01;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  spend time \", percentile);\r\n                if(percentile != 0.01)\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list,sessionId,\"battery_capacity\",percentile, \"greater\",use_case_preference_key);\r\n            }\r\n        }\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"performance_score\");\r\n        keyList = [\"model_name\",\"processor_type\",\"ram_memory\",\"no_of_cores\",\"processor_frequency\",\"battery_capacity\"];\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        reason_message=\" Performance list: \\n List is sorted based on expert performance reviews and \" +\r\n            \"also as per your requirement with \" ;\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            var use_case_preference_key = use_case_preference_key_list[k];\r\n            var key = use_case_preference_key + \"_marked_value\";\r\n            if( use_case_preference_key == \"gaming\" && isKeyExists(key,localContext)){\r\n                reason_message += \" best GPU,\";\r\n            }\r\n            if( use_case_preference_key == \"app_running\" && isKeyExists(key,localContext)){\r\n                reason_message += \"RAM > \"+ localContext[key] + \" and \";\r\n            }\r\n            if( use_case_preference_key == \"spend_time\" && isKeyExists(key,localContext)){\r\n                reason_message += \"Battery capacity > \"+ localContext[key] + \" \";\r\n            }\r\n        }\r\n        reason_message += \" in the given price range. \";\r\n    }\r\n    else if( feature == \"battery\"){\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            use_case_preference_key = use_case_preference_key_list[k];\r\n            var user_answer_list = localContext[\"sessionVars\"][use_case_preference_key];\r\n            var percentile;\r\n            if( use_case_preference_key == \"network_type\"){\r\n                var max =  Math.max(user_answer_list);\r\n                if(max == 0)percentile = 0.40;\r\n                else if(max == 1)percentile = 0.20;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  STAND BY TIME \", percentile);\r\n                if(percentile != 0.01) {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"stand_by_time\", percentile, \"greater\", use_case_preference_key);\r\n                }\r\n            }\r\n            if( use_case_preference_key == \"spend_time_battery\"){\r\n                var max =  Math.max(user_answer_list);\r\n                console.log(\" MAX VALUE\",max);\r\n                if(max == 0) percentile = 0.40;\r\n                else if(max == 1)percentile = 0.20;\r\n                else if(max == 2)percentile = 0.15;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  battery capacity \", percentile);\r\n                if(percentile != 0.01) {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"battery_capacity\", percentile, \"greater\", use_case_preference_key);\r\n                }\r\n            }\r\n        }\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"battery_score\");\r\n        keyList = [\"model_name\",\"battery_type\",\"ram_memory\",\"stand_by_time\",\"battery_capacity\"];\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        reason_message=\" Battery list:\\n List is sorted based on expert performance and also as per your requirement with \" ;\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            var use_case_preference_key = use_case_preference_key_list[k];\r\n            var key = use_case_preference_key + \"_marked_value\";\r\n            if( use_case_preference_key == \"network_type\" && isKeyExists(key,localContext)){\r\n                reason_message += \"standby time > \"+ localContext[key] + \" and \";\r\n            }\r\n            if( use_case_preference_key == \"spend_time_battery\" && isKeyExists(key,localContext)){\r\n                reason_message += \"battery capacity > \"+ localContext[key] ;\r\n            }\r\n        }\r\n        reason_message += \" in the given price range. \";\r\n    }\r\n    else if ( feature == \"display\") {\r\n\r\n        var display_type ;\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            use_case_preference_key = use_case_preference_key_list[k];\r\n            var user_answer_list = localContext[\"sessionVars\"][use_case_preference_key];\r\n            var percentile;\r\n            if( use_case_preference_key == \"frequent_use_activity\"){\r\n                var max =  Math.max(user_answer_list);\r\n                if(max == 0)percentile = 0.50;\r\n                else if(max == 1)percentile = 0.45;\r\n                else if(max == 2)percentile = 0.35;\r\n                else if(max == 3)percentile = 0.25;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  gaming \", percentile);\r\n                if(percentile != 0.01) {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"screen_size\", percentile, \"greater\", use_case_preference_key);\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list,sessionId,\"video_resolution\", percentile, \"greater\" ,use_case_preference_key);\r\n                }\r\n            }\r\n            if( use_case_preference_key == \"use_phone_light\"){\r\n                var max =  Math.max(user_answer_list);\r\n                console.log(\" MAX VALUE\",max);\r\n                if(max == 0){\r\n                    phone_list = extractFieldsFromList(phone_list);\r\n                    phone_list = phone_list.filter(function(phone){\r\n\r\n                        var display_type = phone[\"display_type\"][0];\r\n                        display_type = display_type.toLowerCase().trim();\r\n                        if(display_type.indexOf(\"ips\") > -1)return true;\r\n                        else if(display_type.indexOf(\"lcd\") > -1)return true;\r\n                        else return false;\r\n                    });\r\n                    phone_list =  addFieldsToList(phone_list);\r\n                    display_type = \"ips\";\r\n                }\r\n                else if( max == 1){\r\n                    phone_list = extractFieldsFromList(phone_list);\r\n                    phone_list = phone_list.filter(function(phone){\r\n\r\n                        var display_type = phone[\"display_type\"][0];\r\n                        display_type = display_type.toLowerCase().trim();\r\n                        if(display_type.indexOf(\"oled\") > -1)return true;\r\n                        else if(display_type.indexOf(\"amoled\") > -1)return true;\r\n                        else if(display_type.indexOf(\"super amoled\") > -1)return true;\r\n                        else if(display_type.indexOf(\"retina\") > -1)return true;\r\n                        else return false;\r\n                    });\r\n                    phone_list =  addFieldsToList(phone_list)\r\n                    display_type = \"amoled\";\r\n                }\r\n            }\r\n        }\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"display_score\");\r\n\r\n        keyList = [\"model_name\",\"processor_type\",\"ram_memory\",\"gpu\",\"no_of_cores\",\"battery_capacity\",\"ram_memory\",];\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        reason_message=\" Display list:\\n List is sorted based on expert display review, display specs and also as per your \" +\r\n            \"preferences with \" ;\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            var use_case_preference_key = use_case_preference_key_list[k];\r\n            var key = use_case_preference_key + \"_marked_value\";\r\n            if( use_case_preference_key == \"frequent_use_activity\" && isKeyExists(key,localContext)){\r\n                reason_message += \" resolution >\" + localContext[key]  ;\r\n            }\r\n        }\r\n        reason_message += \" in the given price range. \";\r\n        if(display_type == \"amoled\")\r\n            reason_message += \"AMOLED screens will have deep blacks,vibrant colors and great battery life.\";\r\n        else if(display_type == \"ips\"){\r\n            reason_message += \"IPS screens will have bright whites,daylight readability and sharp text and images\";\r\n        }\r\n    }\r\n    else if( feature == \"front camera resolution\"){\r\n\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"camera_score\");\r\n        if(phone_list.length > 25)\r\n            phone_list = phone_list.slice(0,25);\r\n\r\n        for (var k = 0; k < use_case_preference_key_list.length; k++) {\r\n            use_case_preference_key = use_case_preference_key_list[k];\r\n            user_answer =  localContext[\"sessionVars\"][use_case_preference_key];\r\n            var percentile;\r\n            if(use_case_preference_key == \"record_videos\"){\r\n\r\n                if(user_answer == \"agree\")percentile = 0.40;\r\n                else if( user_answer == \"neutral\") percentile = 0.20;\r\n                else if( user_answer == \"disagree\") percentile = 0.01;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE record videos \");\r\n                phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"video_resolution\", percentile, \"greater\",use_case_preference_key);\r\n\r\n            } else if( use_case_preference_key == \"after_camera_important\"){\r\n\r\n                if(user_answer == \"battery\"){\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"battery_score\", 0.30, \"greater\", use_case_preference_key);\r\n                } else if(user_answer == \"performance\"){\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"performance_score\", 0.30, \"greater\", use_case_preference_key);\r\n                } else if(user_answer == \"display\"){\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"display_score\", 0.30, \"greater\", use_case_preference_key);\r\n                }\r\n\r\n            }\r\n        }\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"front_camera_resolution\");\r\n        keyList = [\"model_name\",\"processor_type\",\"gpu\",\"ram_memory\",\"no_of_cores\",\"processor_frequency\",\"battery_capacity\"];\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        reason_message = \"Selfie List:\\n List is sorted based on front camera resolution, expert camera reviews and \" +\r\n            \"also as per your preferences with \" ;\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            var use_case_preference_key = use_case_preference_key_list[k];\r\n            var key = use_case_preference_key + \"_marked_value\";\r\n            if( use_case_preference_key == \"frequent_use_activity\" && isKeyExists(key,localContext)){\r\n                reason_message += \" screen size >\" + localContext[key]  ;\r\n            }\r\n        }\r\n        reason_message += \" in the given price range. \";\r\n        console.log(reason_message);\r\n        console.log(pref_message);\r\n    }\r\n    else if(feature == \"memory\"){\r\n        for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            use_case_preference_key = use_case_preference_key_list[k];\r\n            var user_answer_list = localContext[\"sessionVars\"][use_case_preference_key];\r\n            var percentile;\r\n            if( use_case_preference_key == \"relevant_internal_memory\"){\r\n                var max =  Math.max(user_answer_list);\r\n                if(max == 0 || max == 2 || max == 4) percentile = 0.45;\r\n                else if(max == 1 || max == 3 || max == 5)percentile = 0.25;\r\n                else percentile = 0.01;\r\n                console.log(\" PERCENTILE  relevant internal memory \", percentile);\r\n                if(percentile != 0.01) {\r\n                    phone_list = filterPhonesBasedFeatureQuest(phone_list, sessionId, \"internal_memory\", percentile, \"greater\", use_case_preference_key);\r\n                }\r\n            }\r\n            if( use_case_preference_key == \"micro_sd_card_cost\"){\r\n                var max =  Math.max(user_answer_list);\r\n                console.log(\" MAX VALUE\",max);\r\n                var user_external_memory;\r\n                if(max == 0) user_external_memory = 8;\r\n                else if(max == 1) user_external_memory = 16;\r\n                else if(max == 2) user_external_memory = 32;\r\n                else if(max == 3) user_external_memory = 64;\r\n                else if(max == 4) user_external_memory = 128;\r\n                else user_external_memory = 0;\r\n\r\n                if(user_external_memory != 0) {\r\n                    for (var m = 0; m < phone_list.length; m++) {\r\n                        var external_memory = parseInt(phone_list[m][\"fields\"][\"expandable_memory\"][0]);\r\n                        var internal_memory = parseInt(phone_list[m][\"fields\"][\"internal_memory\"][0]);\r\n                        if (external_memory > user_external_memory)\r\n                            external_memory = user_external_memory;\r\n                        var temp_list = [external_memory + internal_memory];\r\n                        phone_list[m][\"fields\"][\"total_memory\"] = temp_list;\r\n                    }\r\n                    phone_list = sortPhoneListByKey(phone_list, sessionId, \"total_memory\");\r\n                }\r\n            }\r\n        }\r\n\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"performance_score\");\r\n\r\n        keyList = [\"model_name\",\"internal_memory\",\"expandable_memory\",\"ram_memory\",\"micro_sd_slot\"];\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        reason_message=\" List is sorted based on sum of internal memory and external memory that \" +\r\n            \"you are willing to buy and also as per\" + \" overall performance \" ;\r\n       /* for(var k=0;k<use_case_preference_key_list.length;k++){\r\n            var use_case_preference_key = use_case_preference_key_list[k];\r\n            var key = use_case_preference_key + \"_marked_value\";\r\n            if( use_case_preference_key == \"relevant_internal_memory\" && isKeyExists(key,localContext)){\r\n                reason_message += \" internal memory >\" + localContext[key]  ;\r\n            }\r\n        }\r\n        reason_message += \" in the given price range. \";\r\n        */\r\n    }\r\n    else if(feature == \"all\"){\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"overall_score\");\r\n        keyList = [\"model_name\",'screen_size',\"primary_camera_resolution\",\"internal_memory\",\"ram_memory\"];\r\n        pref_message = makeReasonMessage(phone_list[0],keyList);\r\n        reason_message=\"List is sorted based on expert reviews and in the price range \"\r\n    }\r\n    else if(feature == \"phonelist_videos\"){\r\n        if(phone_list.length > 25)\r\n            phone_list = phone_list.slice(0,25);\r\n        phone_list = sortPhoneListByKey(phone_list,sessionId,\"video_resolution\");\r\n        reason_message = Mappings.isReasonExists(feature) ? Mappings.getReasonMessage(feature) : \"\";\r\n    }\r\n\r\n    if(number == \"one\") {\r\n        if(pref_message != null) {\r\n            messages.push({type: \"text\", message: \"We recommend you the below phone as per your preferences.\"});\r\n            messages.push({type: \"text\", message: pref_message});\r\n        }\r\n        messages.push({type:\"text\",message: \"Please scroll up to see more: \"});\r\n    }\r\n\r\n    if(reason_message != null ) {\r\n        messages.push({type: \"text\", message: reason_message});\r\n    } else if( isKeyExists(\"list_reason_message\",localContext)){\r\n        reason_message = localContext[\"list_reason_message\"];\r\n        messages.push({type: \"text\", message: reason_message});\r\n    }\r\n\r\n    var id = [];\r\n    for(var i=0;i<phone_list.length;i++){\r\n        id.push(phone_list[i][\"fields\"][\"id\"][0]);\r\n    }\r\n\r\n    // console.log(id);\r\n    lContext.storeNewKey(sessionId,\"prev_total_list_ids\",id);\r\n    lContext.storeNewKey(sessionId, \"prev_total_list\", phone_list);\r\n    lContext.storeNewKey(sessionId, \"prev_list\", \"phone_list\");\r\n\r\n\r\n    phone_list = extractFieldsFromList(phone_list);\r\n\r\n    relevant_attribute = Mappings.hasReleventAttriubte(feature) ? Mappings.getRelevantAttribute(feature) : [];\r\n\r\n    messages.push({ type: \"list\", message: phone_list, relevant_attribute:relevant_attribute});\r\n\r\n    console.log(\"filter brand pref completed\");\r\n    return messages\r\n}\r\n\r\nfunction printMessagesWhenPrevList(phone_list,sessionId,feature){\r\n\r\n    var localContext =  lContext.userContext(sessionId);\r\n    var messages = [];\r\n    console.log(\"Running printMessagesWhenPrevList function\");\r\n    if(phone_list.length == 0){\r\n        messages.push({ type: \"text\", message: Messages.listMessage(\"notAvailable\") });\r\n        lContext.deleteKey(sessionId, \"prev_list_query\");\r\n        lContext.deleteKey(sessionId, \"prev_list\");\r\n        return messages;\r\n    }\r\n\r\n    feature = feature.toLowerCase();\r\n\r\n    phone_list = extractFieldsFromList(phone_list);\r\n    console.log(\"Running printMessagesWhenPrevList function\");\r\n\r\n    // console.log(phone_list);\r\n    var id_list = [];\r\n    for(var i=0;i<phone_list.length;i++){\r\n        var id = phone_list[i][\"_id\"];\r\n        var fields = phone_list[i][\"fields\"];\r\n        id_list.push(id);\r\n    }\r\n\r\n    console.log(\"Adding ids : \");\r\n    console.log(id_list);\r\n    console.log(\"Running printMessagesWhenPrevList function\");\r\n    lContext.storeNewKey(sessionId,\"prev_total_list_ids\",id_list);\r\n    lContext.storeNewKey(sessionId, \"prev_total_list\", phone_list);\r\n    lContext.storeNewKey(sessionId, \"prev_list\", \"phone_list\");\r\n\r\n\r\n    var relevant_attribute = Mappings.hasReleventAttriubte(feature) ? Mappings.getRelevantAttribute(feature) : [];\r\n    messages.push({ type: \"list\", message:phone_list,relevant_attribute :relevant_attribute });\r\n    messages.push({type: \"text\", message: Messages.listMessage(\"scroll\")});\r\n\r\n    var reason_message = Mappings.isReasonExists(feature) ? Mappings.getReasonMessage(feature) : undefined;\r\n    if(reason_message)\r\n        messages.push({type:\"text\",message:reason_message});\r\n    return messages;\r\n}\r\nfunction printMessagesWhenNoPrevList(phone_list,sessionId,source){\r\n\r\n    console.log(\"print message when no prev list\");\r\n    var localContext = lContext.userContext(sessionId);\r\n    var messages = [];\r\n\r\n    if (phone_list.length > 0) {\r\n\r\n        if(source == \"fb\"){\r\n\r\n            var shown_phone_list = phone_list.slice(0, 7);\r\n            lContext.storeNewKey(sessionId, \"user_shown_list\", shown_phone_list);\r\n            var phone_names = \"\";\r\n            for (var i = 0; i < shown_phone_list.length; i++)\r\n                phone_names += i + 1 + \". \" + shown_phone_list[i][\"fields\"][\"model_name\"][0] + \"\\n\";\r\n            messages.push({ type: \"text\", message: phone_names });\r\n            messages.push({ type: \"list\", message: shown_phone_list });\r\n\r\n        }\r\n        else if( source == \"android\") {\r\n\r\n            var list = [];\r\n            for (var i = 0; i < phone_list.length; i++)\r\n                list.push(phone_list[i][\"fields\"]);\r\n            var relevant_attribute = localContext[\"relevant_attribute\"];\r\n\r\n            if(relevant_attribute == null || relevant_attribute == undefined)\r\n                relevant_attribute = [];\r\n            var feature = localContext.sessionVars.feature_pref.toLowerCase();\r\n            if(feature == \"camera\") {\r\n                relevant_attribute = [{\"primary_camera_resolution\": \"CAMERA RESOLUTION\"},\r\n                    {\"front_camera_resolution\": \" FRONT CAMERA RESOLUTION\"},\r\n                    {\"video_resolution\": \" VIDEO RESOLUTION\"},\r\n                    {\"internal_memory\": \" INTERNAL MEMORY\"}];\r\n                messages.push({type:\"text\",message: \"We recommend you the below phone as per your preferences.\"});\r\n                var pref_message = \"Model Name : \"+ list[0][\"model_name\"][0]+ \"\\n\"\r\n                    + \"Primary camera resolution : \"+ list[0][\"primary_camera_resolution\"][0]+\"  \" +\r\n                            Mappings.getUnitKey(\"primary_camera_resolution\") + \"\\n\"\r\n                    + \"Front camera resolution : \"+ list[0][\"front_camera_resolution\"][0]+ \"  \" +\r\n                            Mappings.getUnitKey(\"front_camera_resolution\") +\"\\n\"\r\n                    + \"Primary camera features : \" + list[0][\"primary_camera_features\"][0] + \"  \" +\r\n                         Mappings.getUnitKey(\"primary_camera_features\") +\"\\n\"\r\n                    + \"Video resolution : \" +  list[0][\"video_resolution\"][0] + \"  \" +\r\n                        Mappings.getUnitKey(\"video_resolution\") +\"\\n\";\r\n                messages.push({type:\"text\",message: pref_message});\r\n                messages.push({type:\"text\",message: \"Please scroll up to see more: \"});\r\n\r\n                var use_case_questions = Messages.useCaseQuestions[feature];\r\n                var use_case_preference_key_list = Object.keys(use_case_questions);\r\n                var reason_message=\"List is sorted based on camera, camera expert reviews and also as per your\" +\r\n                    \" preferences  with \" ;\r\n                for(var k=0;k<use_case_preference_key_list.length;k++){\r\n                    var use_case_preference_key = use_case_preference_key_list[k];\r\n                    var key = use_case_preference_key + \"_marked_value\";\r\n                    if( use_case_preference_key == \"front_camera_pref\" && isKeyExists(key,localContext)){\r\n                        reason_message += \" front camera resolution \"+ localContext[key] ;\r\n                    }\r\n                    if( use_case_preference_key == \"video_recording_pref\" && isKeyExists(key,localContext)){\r\n                        reason_message += \" video resolution > \"+ localContext[key] + \" and \";\r\n                    }\r\n                    if( use_case_preference_key == \"photo_storage_pref\" && isKeyExists(key,localContext)){\r\n                        reason_message += \"phone storage > \"+ localContext[key] + \" \";\r\n                    }\r\n                }\r\n                reason_message += \" in the given price range. \";\r\n                messages.push({type:\"text\",message: reason_message});\r\n            }\r\n            else if( feature == \"performance\"){\r\n                relevant_attribute = [\r\n                    {gpu : \"GPU\"},\r\n                    {ram_memory: \" RAM MEMORY\"},\r\n                    {processor_type : \"PROCESSOR TYPE\" },\r\n                    {battery_capacity : \"BATTERY CAPACITY\"},\r\n                    {processor_frequency : \"PROCESSOR FREQUENCY\"}];\r\n                messages.push({type:\"text\",message: \"We recommend you the below phone as per your preferences.\"});\r\n                var pref_message = \"Model Name: \" + list[0][\"model_name\"][0]+ \"\\n\"\r\n                    + \"Processor type: \" + list[0][\"processor_type\"][0]+ \"\\n\"\r\n                    + \"GPU type: \" + list[0][\"gpu\"][0]+\"\\n\"\r\n                    + \"RAM memory: \" + list[0][\"ram_memory\"][0] +  \"  \" + Mappings.getUnitKey(\"ram_memory\") +\"\\n\"\r\n                    + \"No of cores: \" + list[0][\"no_of_cores\"][0] + \" \" + Mappings.getUnitKey(\"no_of_cores\") + \"\\n\"\r\n                    + \"Processor frequency: \" + list[0][\"processor_frequency\"][0]+  \" \"\r\n                    + Mappings.getUnitKey(\"processor_frequency\") +\"\\n\"\r\n                    + \"Battery capacity: \" + list[0][\"battery_capacity\"][0]+  \" \"\r\n                    + Mappings.getUnitKey(\"battery_capacity\") +\"\\n\";\r\n                messages.push({type:\"text\",message: pref_message});\r\n\r\n                messages.push({type:\"text\",message: \"Please scroll up to see more: \"});\r\n\r\n                var use_case_questions = Messages.useCaseQuestions[feature];\r\n                var use_case_preference_key_list = Object.keys(use_case_questions);\r\n                var reason_message=\"List is sorted based on expert performance and also as per your requirement with \" ;\r\n                for(var k=0;k<use_case_preference_key_list.length;k++){\r\n                    var use_case_preference_key = use_case_preference_key_list[k];\r\n                    var key = use_case_preference_key + \"_marked_value\";\r\n                    if( use_case_preference_key == \"gaming\" && isKeyExists(key,localContext)){\r\n                        reason_message += \" best GPU,\";\r\n                    }\r\n                    if( use_case_preference_key == \"app_running\" && isKeyExists(key,localContext)){\r\n                        reason_message += \"RAM > \"+ localContext[key] + \" and \";\r\n                    }\r\n                    if( use_case_preference_key == \"spend_time\" && isKeyExists(key,localContext)){\r\n                        reason_message += \"Battery capacity > \"+ localContext[key] + \" \";\r\n                    }\r\n                }\r\n                reason_message += \" in the given price range. \";\r\n                messages.push({type:\"text\",message: reason_message});\r\n            }\r\n            else if( feature == \"battery\") {\r\n                relevant_attribute = [\r\n                    {battery_capacity : \"BATTERY CAPACITY\"},\r\n                    {battery_type : \"BATTERY TYPE\"},\r\n                    {non_removable_battery: \" NON REMOVABLE BATTERY\"},\r\n                    {stand_by_time : \"STANDBY TIME\" } ];\r\n                messages.push({type:\"text\",message: \"We recommend you the below phone as per your preferences.\"});\r\n                var pref_message = \"Model Name: \" + list[0][\"model_name\"][0]+ \"\\n\"\r\n                    + \"Battery type: \" + list[0][\"battery_type\"][0]+ \"\\n\"\r\n                    + \"RAM memory: \" + list[0][\"ram_memory\"][0] +  \"  \" + Mappings.getUnitKey(\"ram_memory\") +\"\\n\"\r\n                    + \"Standby time: \" + list[0][\"stand_by_time\"][0] + \" \" + Mappings.getUnitKey(\"no_of_cores\") + \"\\n\"\r\n                    + \"Battery capacity: \" + list[0][\"battery_capacity\"][0]+  \" \" + Mappings.getUnitKey(\"battery_capacity\") +\"\\n\";\r\n                messages.push({type:\"text\",message: pref_message});\r\n\r\n                messages.push({type:\"text\",message: \"Please scroll up to see more: \"});\r\n\r\n                var use_case_questions = Messages.useCaseQuestions[feature];\r\n                var use_case_preference_key_list = Object.keys(use_case_questions);\r\n                var reason_message=\"List is sorted based on expert performance and also as per your requirement with \" ;\r\n                for(var k=0;k<use_case_preference_key_list.length;k++){\r\n                    var use_case_preference_key = use_case_preference_key_list[k];\r\n                    var key = use_case_preference_key + \"_marked_value\";\r\n                    if( use_case_preference_key == \"network_type\" && isKeyExists(key,localContext)){\r\n                        reason_message += \"standby time > \"+ localContext[key] + \" and \";\r\n                    }\r\n                    if( use_case_preference_key == \"spend_time_battery\" && isKeyExists(key,localContext)){\r\n                        reason_message += \"battery capacity > \"+ localContext[key] ;\r\n                    }\r\n                }\r\n\r\n                reason_message += \" in the given price range. \";\r\n                messages.push({type:\"text\",message: reason_message});\r\n            }\r\n            else if( feature == \"display\"){\r\n                relevant_attribute = [\r\n                    {screen_size: \"SCREEN SIZE\"},\r\n                    {display_resolution : \"DISPLAY RESOLUTION\"},\r\n                    {display_type: \" DISPLAY TYPE\"},\r\n                    {screen_pixel_density : \"PPI\" },\r\n                    {battery_capacity : \"BATTERY\"},\r\n                    {video_resolution : \"VIDEO RESOLUTION\"}];\r\n                messages.push({type:\"text\",message: \"We recommend you the below phone as per your preferences.\"});\r\n                var pref_message = \"Model Name: \" + list[0][\"model_name\"][0]+ \"\\n\"\r\n                    + \"Processor type: \" + list[0][\"processor_type\"][0]+ \"\\n\"\r\n                    + \"GPU type: \" + list[0][\"gpu\"][0]+\"\\n\"\r\n                    + \"RAM memory: \" + list[0][\"ram_memory\"][0] +  \"  \" + Mappings.getUnitKey(\"ram_memory\") +\"\\n\"\r\n                    + \"No of cores: \" + list[0][\"no_of_cores\"][0] + \" \" + Mappings.getUnitKey(\"no_of_cores\") + \"\\n\"\r\n                    + \"Processor frequency: \" + list[0][\"processor_frequency\"][0]+  \" \"\r\n                    + Mappings.getUnitKey(\"processor_frequency\") +\"\\n\"\r\n                    + \"Battery capacity: \" + list[0][\"battery_capacity\"][0]+  \" \"\r\n                    + Mappings.getUnitKey(\"battery_capacity\") +\"\\n\";\r\n                messages.push({type:\"text\",message: pref_message});\r\n\r\n                messages.push({type:\"text\",message: \"Please scroll up to see more: \"});\r\n\r\n                var use_case_questions = Messages.useCaseQuestions[feature];\r\n                var use_case_preference_key_list = Object.keys(use_case_questions);\r\n                var reason_message=\"List is sorted based on expert display review, display specs and also as per your \" +\r\n                    \"preferences with \" ;\r\n                for(var k=0;k<use_case_preference_key_list.length;k++){\r\n                    var use_case_preference_key = use_case_preference_key_list[k];\r\n                    var key = use_case_preference_key + \"_marked_value\";\r\n                    if( use_case_preference_key == \"frequent_use_activity\" && isKeyExists(key,localContext)){\r\n                        reason_message += \" resolution >\" + localContext[key]  ;\r\n                    }\r\n                    /*\r\n                        if( use_case_preference_key == \"use_phone_light\" && isKeyExists(key,localContext)){\r\n                            reason_message += \"RAM > \"+ localContext[key] ;\r\n                        }\r\n                    */\r\n                }\r\n                reason_message += \" in the given price range. \";\r\n                messages.push({type:\"text\",message: reason_message});\r\n            }\r\n            else if( feature == \"front camera resolution\"){\r\n                relevant_attribute = [\r\n                    {front_camera_resolution: \"FRONT CAMERA RESOLUTION\"},\r\n                    {primary_camera_resolution : \"PRIMARY CAMERA RESOLUTION\"},\r\n                    {video_resolution: \" VIDEO RESOLUTION\"},\r\n                    {auto_focus : \"AUTO FOCUS\" },\r\n                    {flash_type : \"FLASH TYPE\"},\r\n                    {internal_memory : \"INTERNAL MEMORY\"}];\r\n                messages.push({type:\"text\",message: \"We recommend you the below phone as per your preferences.\"});\r\n                var pref_message = \"Model Name: \" + list[0][\"model_name\"][0]+ \"\\n\"\r\n                    + \"Processor type: \" + list[0][\"processor_type\"][0]+ \"\\n\"\r\n                    + \"GPU type: \" + list[0][\"gpu\"][0]+\"\\n\"\r\n                    + \"RAM memory: \" + list[0][\"ram_memory\"][0] +  \"  \" + Mappings.getUnitKey(\"ram_memory\") +\"\\n\"\r\n                    + \"No of cores: \" + list[0][\"no_of_cores\"][0] + \" \" + Mappings.getUnitKey(\"no_of_cores\") + \"\\n\"\r\n                    + \"Processor frequency: \" + list[0][\"processor_frequency\"][0]+  \" \"\r\n                    + Mappings.getUnitKey(\"processor_frequency\") +\"\\n\"\r\n                    + \"Battery capacity: \" + list[0][\"battery_capacity\"][0]+  \" \"\r\n                    + Mappings.getUnitKey(\"battery_capacity\") +\"\\n\";\r\n                messages.push({type:\"text\",message: pref_message});\r\n\r\n                messages.push({type:\"text\",message: \"Please scroll up to see more: \"});\r\n\r\n                var use_case_questions = Messages.useCaseQuestions[feature];\r\n                var use_case_preference_key_list = Object.keys(use_case_questions);\r\n                var reason_message=\"List is sorted based on front camera resolution, expert camera reviews and \" +\r\n                    \"also as per your preferences with \" ;\r\n                for(var k=0;k<use_case_preference_key_list.length;k++){\r\n                    var use_case_preference_key = use_case_preference_key_list[k];\r\n                    var key = use_case_preference_key + \"_marked_value\";\r\n                    if( use_case_preference_key == \"frequent_use_activity\" && isKeyExists(key,localContext)){\r\n                        reason_message += \" screen size >\" + localContext[key]  ;\r\n                    }\r\n                    /*\r\n                     if( use_case_preference_key == \"use_phone_light\" && isKeyExists(key,localContext)){\r\n                     reason_message += \"RAM > \"+ localContext[key] ;\r\n                     }\r\n                     */\r\n                }\r\n                reason_message += \" in the given price range. \";\r\n                messages.push({type:\"text\",message: reason_message});\r\n            }\r\n            else if( feature == \"phonelist_videos\"){\r\n\r\n            }\r\n            messages.push({ type: \"list\", message:list,relevant_attribute:relevant_attribute });\r\n        }\r\n        // if(isKeyExists(\"list_reason_message\",localContext))\r\n        //   messages.push({type:\"text\",message:localContext.list_reason_message});\r\n        // messages.push({type: \"text\", message: Messages.listMessage(\"scroll\")});\r\n        lContext.deleteKey(sessionId,\"list_reason_message\");\r\n\r\n    }\r\n    else {\r\n        messages.push({ type: \"text\", message: Messages.listMessage(\"notAvailable\") });\r\n        lContext.deleteKey(sessionId, \"prev_list_query\");\r\n        lContext.deleteKey(sessionId, \"prev_list\");\r\n    }\r\n    return messages;\r\n}\r\nfunction processCombinedList(lists ,feature1,feature2,sessionId){\r\n\r\n    var firstList  = lists[0];\r\n    var secondList = lists[1];\r\n\r\n    console.log( \"first  list length : \" + firstList.length);\r\n    console.log( \"second list length : \" + secondList.length);\r\n\r\n    for(var i=0;i<secondList.length;i++){\r\n        var item_name = secondList[i][\"model_name\"][0];\r\n\r\n        var found = false;\r\n        for(var j=0;j < firstList.length;j++){\r\n            var item_name2 = firstList[j][\"model_name\"][0];\r\n            if(item_name == item_name2) {\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        if(!found){\r\n            firstList.push(secondList[i]);\r\n        }\r\n    }\r\n\r\n    var feature_score1 = Mappings.getSpecScores(feature1);\r\n    var feature_score2 = Mappings.getSpecScores(feature2);\r\n\r\n    console.log(feature_score1 ,feature_score2);\r\n    for(var i=0;i<firstList.length;i++){\r\n        var item = firstList[i];\r\n        var item_feature_score1 = parseInt(item[feature_score1][0]);\r\n        var item_feature_score2 = parseInt(item[feature_score2][0]);\r\n        var temp_list = [0.5 * item_feature_score1 + 0.5 * item_feature_score2];\r\n        firstList[i][\"combined_score\"] = temp_list;\r\n    }\r\n\r\n    firstList = addFieldsToList(firstList);\r\n//    printPhoneList(firstList,\"model_name\");\r\n    firstList = sortPhoneListByKey(firstList,sessionId,\"combined_score\");\r\n\r\n    firstList = extractFieldsFromList(firstList);\r\n    console.log(\" ============> after combined sort <==============  \");\r\n  //  printPhoneList(firstList,\"model_name\");\r\n\r\n    return firstList;\r\n\r\n}\r\n// data processing functions\r\nfunction getFieldsFromDB(fields, model_names, cb) {\r\n\r\n    var query_data = model_names.join(\" \");\r\n    Search.getValue(fields, query_data, function (data) {\r\n        var result_list = [];\r\n        var list = data.hits.hits;\r\n        for (var i = 0; i < list.length; i++) {\r\n            var model = list[i][\"fields\"][\"model_name\"][0];\r\n            if (model_names.indexOf(model) > -1) result_list.push(list[i][\"fields\"]);\r\n        }\r\n        cb(result_list);\r\n    });\r\n}\r\nfunction getAttributeValueFromDB(field_name, model_name, cb) {\r\n\r\n    var fields = [field_name,\"model_name\"];\r\n    console.log(\"Start of getAttributeValueFromDB function\");\r\n    Search.getValue(fields, model_name, function (data) {\r\n        var result = \"\";\r\n        var list = data.hits.hits;\r\n        for (var i = 0; i < list.length; i++) {\r\n            var model = list[i][\"fields\"][\"model_name\"][0];\r\n            if(model == model_name) {\r\n                try {\r\n                    result = list[i][\"fields\"][field_name][0];\r\n                    break;\r\n                }catch(error){\r\n                }\r\n            }\r\n        }\r\n        cb(result);\r\n    });\r\n}\r\n\r\nfunction betterMobiles(map_key, model_names, cb) {\r\n    var fields = [\"model_name\"];\r\n    var messages = [];\r\n    if (map_key != \"better\") {\r\n        var spec_score = Mappings.hasSpecScores(map_key) ? Mappings.getSpecScores(map_key) : undefined;\r\n        if (spec_score == undefined) {\r\n            messages.push({ type: \"text\", message: Messages.listMessage(\"noInfo\") });\r\n            cb(messages);\r\n            return;\r\n        }\r\n        fields.push(spec_score);\r\n    } else fields = fields.concat(Mappings.getFieldsAttribute(\"better\"));\r\n    var query_data = model_names.join(\" \");\r\n    Search.getValue(fields, query_data, function (data) {\r\n        var result_list = [];\r\n        var list = data.hits.hits;\r\n        for (var i = 0; i < list.length; i++) {\r\n            var model = list[i][\"fields\"][\"model_name\"][0];\r\n            if (model_names.indexOf(model) > -1) result_list.push(list[i][\"fields\"]);\r\n        }\r\n        var output_common;\r\n\r\n        if (map_key != \"better\") {\r\n            //attribute and feature\r\n            var spec_key = fields[1].toString();\r\n            var value1 = parseFloat(result_list[0][spec_key]);\r\n            var value2 = parseFloat(result_list[1][spec_key]);\r\n            if (value1 > value2) {\r\n                output_common = result_list[0][\"model_name\"] + \" is better than \" + result_list[1][\"model_name\"] + \" in \" + map_key;\r\n            }\r\n            else if (value1 < value2) {\r\n                output_common = result_list[1][\"model_name\"] + \" is better than \" + result_list[0][\"model_name\"] + \" in \" + map_key;\r\n            }\r\n            else output_common = result_list[1][\"model_name\"] + \" is equal to \" + result_list[0][\"model_name\"] + \" in \" + map_key;\r\n\r\n            messages.push({ type: \"text\", message: output_common });\r\n            cb(messages);\r\n            return;\r\n        }\r\n\r\n        var output_sku1 = result_list[0][\"model_name\"] + \": \\n\";\r\n        var output_sku2 = result_list[1][\"model_name\"] + \": \\n\";;\r\n\r\n        var key_list = fields;\r\n        var sku1_spec_score = 0;\r\n        var sku2_spec_score = 0;\r\n        var sku1_feature_score = 0;\r\n        var sku2_feature_score = 0;\r\n        for (var i = 0; i < key_list.length; i++) {\r\n            var key = key_list[i];\r\n\r\n            if (key == 'model_name') {\r\n                continue;\r\n            }\r\n            if (key == \"overall_score\") {\r\n                if (result_list[0][\"overall_score\"] > result_list[1][\"overall_score\"]) sku1_spec_score += 1;\r\n                else sku2_spec_score += 1;\r\n                continue;\r\n            }\r\n\r\n            var original_key = Mappings.doesSKUKeyExists(key) ? Mappings.getSKUKey(key) : undefined;\r\n            var unit_key = Mappings.getUnitKey(key);\r\n            // if true first one is better\r\n            var value = findBetterAttribute(result_list, key);\r\n            if (value == 1) {\r\n                //sku1 is added with +\r\n                sku1_feature_score += 1;\r\n                output_sku1 += \" + \" + original_key + \": \" + result_list[0][key] + \" \" + unit_key +\"\\n\";\r\n                output_sku2 += \" - \" + original_key + \": \" + result_list[1][key] + \" \" + unit_key +\"\\n\";\r\n            } else if (value == 2) {\r\n                sku2_feature_score += 1;\r\n                output_sku1 += \" - \" + original_key + \": \" + result_list[0][key] + \" \" + unit_key +\"\\n\";\r\n                output_sku2 += \" + \" + original_key + \": \" + result_list[1][key] + \" \" + unit_key +\"\\n\";\r\n            } else {\r\n                output_sku1 += \" . \" + original_key + \": \" + result_list[0][key] + \" \" + unit_key +\"\\n\";\r\n                output_sku2 += \" . \" + original_key + \": \" + result_list[1][key] + \" \" + unit_key +\"\\n\";\r\n            }\r\n        }\r\n        if (sku1_feature_score > sku2_feature_score || (sku1_feature_score == sku2_feature_score && sku1_spec_score > sku2_spec_score))\r\n            output_common = result_list[0][\"model_name\"] + \" is better than \" + result_list[1][\"model_name\"];\r\n        else output_common = result_list[1][\"model_name\"] + \" is better than \" + result_list[0][\"model_name\"];\r\n\r\n        messages.push({ type: \"text\", message: output_common });\r\n        messages.push({ type: \"text\", message: output_sku1 });\r\n        messages.push({ type: \"text\", message: output_sku2 });\r\n\r\n        cb(messages);\r\n    });\r\n}\r\n\r\n// sentiment analysis code\r\nvar objects = {};\r\nfunction check(keyword, attribute) {\r\n    var keyword_text = keyword.text.toLowerCase();\r\n    if (attribute == \"phone\") {\r\n        if ((keyword_text.indexOf(attribute) > -1 || keyword_text.indexOf(\"mobile\") > -1 || keyword_text.indexOf(\"handset\") > -1) && keyword_text.indexOf(\"battery\") == -1 && keyword_text.indexOf(\"camera\") == -1 && keyword_text.indexOf(\"display\") == -1 && keyword_text.indexOf(\"performance\") == -1) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n    if (attribute == \"performance\") {\r\n        if (keyword_text.indexOf(attribute) > -1 && keyword_text.indexOf(\"camera\") == -1 && keyword_text.indexOf(\"battery\") == -1 && keyword_text.indexOf(\"display\") == -1) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    } else {\r\n        if (keyword_text.indexOf(attribute) > -1) {\r\n            return 1;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n}\r\nfunction final_result(attr, attribute, positive, negitive, pscore, nscore) {\r\n    //local variable\r\n    var p = 0,\r\n        p1 = 0,\r\n        n = 0,\r\n        n1 = 0;\r\n\r\n    if (positive.length > 0) {\r\n        var p_max = parseFloat(0);\r\n        var p1_max = parseFloat(0);\r\n        var p_res = \"\";\r\n        var p1_res = \"\";\r\n        var pl = positive.length;\r\n        for (var i = 0; i < pl; i++) {\r\n            if (parseFloat(pscore[i]) < 0.5) {\r\n                p++;\r\n                if (parseFloat(pscore[i]) > p_max) {\r\n                    p_max = parseFloat(pscore[i]);\r\n                    p_res = positive[i];\r\n                }\r\n            } else {\r\n                p1++;\r\n                if (parseFloat(pscore[i]) > p1_max) {\r\n                    p1_max = parseFloat(pscore[i]);\r\n                    p1_res = positive[i];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    //to split negitive array into two arrays based on camera score <-0.5 >-0.5\r\n    if (negitive.length > 0) {\r\n        var n_max = parseFloat(0);\r\n        var n1_max = parseFloat(0);\r\n        var n_res = \"\";\r\n        var n1_res = \"\";\r\n        var nl = negitive.length;\r\n        for (i = 0; i < nl; i++) {\r\n            if (parseFloat(nscore[i]) < -0.5) {\r\n                n++;\r\n                if (parseFloat(nscore[i]) < n_max) {\r\n                    n_max = parseFloat(nscore[i]);\r\n                    n_res = negitive[i];\r\n                }\r\n            } else {\r\n                n1++;\r\n                if (parseFloat(nscore[i]) < n1_max) {\r\n                    n1_max = parseFloat(nscore[i]);\r\n                    n1_res = negitive[i];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //to check weather positive are exist or not\r\n    if (positive.length > 0) {\r\n        //console.log(\"positive::::::::::::::::::::::::::;\")\r\n        if (p > 0 && p1 > 0) {\r\n            attribute.positive.push(p_res + \"(\" + p + \")\");\r\n            attribute.positive.push(p1_res + \"(\" + p1 + \")\");\r\n            //console.log(p_res+\"(\"+p+\")\");\r\n            //console.log(p1_res+\"(\"+p1+\")\");\r\n        } else if (p > 0 && p1 == 0) {\r\n            attribute.positive.push(p_res + \"(\" + p + \")\");\r\n            //console.log(p_res+\"(\"+p+\")\");\r\n        } else if (p == 0 && p1 > 0) {\r\n            attribute.positive.push(p1_res + \"(\" + p1 + \")\");\r\n            //console.log(p1_res+\"(\"+p1+\")\");\r\n        }\r\n    }\r\n    //to check negives are exist or not\r\n    if (negitive.length > 0) {\r\n        //console.log(\"negative::::::::::::::::::::::::::::\")\r\n        if (n > 0 && n1 > 0) {\r\n            attribute.negitive.push(n_res + \"(\" + n + \")\");\r\n            attribute.negitive.push(n1_res + \"(\" + n1 + \")\");\r\n\r\n            //console.log(n_res+\"(\"+n+\")\");\r\n            //console.log(n1_res+\"(\"+n1+\")\");\r\n        } else if (n == 0 && n1 > 0) {\r\n            attribute.negitive.push(n1_res + \"(\" + n1 + \")\");\r\n\r\n            //console.log(n1_res+\"(\"+n1+\")\");\r\n        } else if (n1 == 0 && n > 0) {\r\n            attribute.negitive.push(n_res + \"(\" + n + \")\");\r\n\r\n            //console.log(n_res+\"(\"+n+\")\");\r\n        }\r\n    }\r\n    if (attr == \"phone\") {\r\n        objects[\"phone\"] = attribute;\r\n    }\r\n    if (attr == \"battery\") {\r\n        objects[\"battery\"] = attribute;\r\n    } else if (attr == \"camera\") {\r\n        objects[\"camera\"] = attribute;\r\n    } else if (attr == \"performance\") {\r\n        objects[\"performance\"] = attribute;\r\n    } else if (attr == \"display\") {\r\n        objects[\"display\"] = attribute;\r\n    } else {\r\n        //console.log(attribute)\r\n        objects[\"other\"] = attribute;\r\n    }\r\n    //console.log(attribute);\r\n}\r\nfunction getSentiment(keywords) {\r\n    /*phone,battery,camera,display,performance,other*/\r\n    var positive_a = [[], [], [], [], [], []];\r\n    var negitive_a = [[], [], [], [], [], []];\r\n    var pscore_a = [[], [], [], [], [], []];\r\n    var nscore_a = [[], [], [], [], [], []];\r\n\r\n    var len_result = keywords.length;\r\n    var phone_att = \"phone\";\r\n    var battery_att = \"battery\";\r\n    var camera_att = \"camera\";\r\n    var display_att = \"display\";\r\n    var performance_att = \"performance\";\r\n    for (var i = 0; i < len_result; i++) {\r\n        //to pass each keyword into correct array\r\n        if (keywords[i].sentiment.type == \"positive\") {\r\n            if (check(keywords[i], phone_att)) {\r\n                positive_a[0].push(keywords[i].text);\r\n                pscore_a[0].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], battery_att)) {\r\n                positive_a[1].push(keywords[i].text);\r\n                pscore_a[1].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], camera_att)) {\r\n                positive_a[2].push(keywords[i].text);\r\n                pscore_a[2].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], display_att)) {\r\n                positive_a[3].push(keywords[i].text);\r\n                pscore_a[3].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], performance_att)) {\r\n                positive_a[4].push(keywords[i].text);\r\n                pscore_a[4].push(parseFloat(keywords[i].sentiment.score));\r\n            } else {\r\n                positive_a[5].push(keywords[i].text);\r\n                pscore_a[5].push(parseFloat(keywords[i].sentiment.score));\r\n            }\r\n        } else if (keywords[i].sentiment.type == \"negative\") {\r\n            if (check(keywords[i], phone_att)) {\r\n                negitive_a[0].push(keywords[i].text);\r\n                nscore_a[0].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], battery_att)) {\r\n                negitive_a[1].push(keywords[i].text);\r\n                nscore_a[1].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], camera_att)) {\r\n                negitive_a[2].push(keywords[i].text);\r\n                nscore_a[2].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], display_att)) {\r\n                negitive_a[3].push(keywords[i].text);\r\n                nscore_a[3].push(parseFloat(keywords[i].sentiment.score));\r\n            } else if (check(keywords[i], performance_att)) {\r\n                negitive_a[4].push(keywords[i].text);\r\n                nscore_a[4].push(parseFloat(keywords[i].sentiment.score));\r\n            } else {\r\n                negitive_a[5].push(keywords[i].text);\r\n                nscore_a[5].push(parseFloat(keywords[i].sentiment.score));\r\n            }\r\n        }\r\n    }\r\n\r\n    var phone = {\r\n        positive: [],\r\n        negitive: []\r\n\r\n    };\r\n    var camera = {\r\n        positive: [],\r\n        negitive: []\r\n    };\r\n\r\n    var battery = {\r\n        positive: [],\r\n        negitive: []\r\n\r\n    };\r\n\r\n    var performance = {\r\n        positive: [],\r\n        negitive: []\r\n\r\n    };\r\n\r\n    var display = {\r\n        positive: [],\r\n        negitive: []\r\n\r\n    };\r\n    var other = {\r\n        positive: [],\r\n        negitive: []\r\n    };\r\n    //console.log(negitive_a[5]);\r\n    //to fill all attribute positive and negitves into object\r\n    final_result(\"phone\", phone, positive_a[0], negitive_a[0], pscore_a[0], nscore_a[0]);\r\n    final_result(\"battery\", battery, positive_a[1], negitive_a[1], pscore_a[1], nscore_a[1]);\r\n    final_result(\"camera\", camera, positive_a[2], negitive_a[2], pscore_a[2], nscore_a[2]);\r\n    final_result(\"display\", display, positive_a[3], negitive_a[3], pscore_a[3], nscore_a[3]);\r\n    final_result(\"performance\", performance, positive_a[4], negitive_a[4], pscore_a[4], nscore_a[4]);\r\n    final_result(\"other\", other, positive_a[5], negitive_a[5], pscore_a[5], nscore_a[5]);\r\n    return objects;\r\n}\r\nfunction getSentimentObject(name, obj) {\r\n    var output = \"\";\r\n    if (obj.positive.length > 0) {\r\n        output = name + \" positives  \\n\";\r\n        for (var i in obj.positive) output += \"\\t\" + obj[\"positive\"][i] + \"\\n\";\r\n    }\r\n    if (obj.negitive.length > 0) {\r\n        output += name + \" negatives  \\n\";\r\n        for (var i in obj.negitive) output += \"\\t\" + obj[\"negitive\"][i] + \"\\n\";\r\n    }\r\n    return output;\r\n}\r\nfunction separateSentiment(data) {\r\n    var output = \"\";\r\n    output += getSentimentObject(\"Phone\", data[\"phone\"]) + \"\\n\";\r\n    output += getSentimentObject(\"Battery\", data[\"battery\"]) + \"\\n\";\r\n    output += getSentimentObject(\"Camera\", data[\"camera\"]) + \"\\n\";\r\n    // output  += getSentimentObject(\"other\",data[\"other\"],output);\r\n    return output;\r\n}\r\n\r\nfunction printEntityListFromWit(entities) {\r\n    console.log(\"-----------Entities from wit---------------\")\r\n    for(var key in entities) {\r\n        var values_array = entities[key];\r\n        var value_string = \"\";\r\n        for(var i in values_array) {\r\n            value_string += \" \" + values_array[i].value;\r\n        }\r\n        console.log(key + \" : \" + value_string);\r\n    }\r\n    console.log(\"--------------------------------------------\")\r\n}\r\n\r\nmodule.exports = {\r\n    isKeyExists: isKeyExists,\r\n    makeListFBFormat: makeListFBFormat,\r\n    definePriceRange: definePriceRange,\r\n    storeValInContext: storeValInContext,\r\n    checkEntities: checkEntities,\r\n    getSentiment: getSentiment,\r\n    sort_by: sort_by,\r\n    separateSentiment: separateSentiment,\r\n    extractFieldsFromList: extractFieldsFromList,\r\n    addFieldsToList: addFieldsToList,\r\n    getSKUAlias: getSKUAlias,\r\n    findAllPhonesHelper: findAllPhonesHelper,\r\n    filterBrandPref: filterBrandPref,\r\n    specMessage: featurePrefMessage,\r\n    jsonConcat: jsonConcat,\r\n    betterMobiles: betterMobiles,\r\n    addPrevQuery: addPrevQuery,\r\n    storePrevQuery: storePrevQuery,\r\n    getAttributeValueFromDB: getAttributeValueFromDB,\r\n    breakMessagesForFacebook:breakMessagesForFacebook,\r\n    getFieldsFromDB:getFieldsFromDB,\r\n    separateKeyValueSKU:separateKeyValueSKU,\r\n    addDirectEntitiesToContext:addDirectEntitiesToContext,\r\n    firstEntityValue: firstEntityValue,\r\n    allEntityValue: allEntityValue,\r\n    printEntityListFromWit:printEntityListFromWit,\r\n    printMessagesWhenPrevList:printMessagesWhenPrevList,\r\n    processCombinedList:processCombinedList\r\n};\r\n\r\n//# sourceMappingURL=helper-compiled.js.map"]}