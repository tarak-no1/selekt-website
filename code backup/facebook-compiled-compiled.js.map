{"version":3,"sources":["facebook-compiled.js"],"names":[],"mappings":"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","file":"facebook-compiled-compiled.js","sourcesContent":["'use strict';\n\n// See the Send API reference\n// https://developers.facebook.com/docs/messenger-platform/send-api-reference\n\nconst request = require('request');\nconst Config = require('./../config/const.js');\n\nconst fbReq = request.defaults({\n  uri: 'https://graph.facebook.com/me/messages',\n  method: 'POST',\n  json: true,\n  qs: {\n    access_token: Config.FB_PAGE_TOKEN\n  },\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\nconst fbMessage = function (recipientId, msg, cb) {\n  const opts = {\n    form: {\n      recipient: {\n        id: recipientId\n      },\n      message: {\n        text: msg\n      }\n    }\n  };\n\n  fbReq(opts, function (err, resp, data) {\n    if (cb) {\n      cb(err || data.error && data.error.message, data);\n    }\n  });\n};\n\nconst fbImageMessage = function (recipientId, msg, cb) {\n  const opts = {\n    form: {\n      recipient: {\n        id: recipientId\n      },\n      message: {\n        attachment: {\n          type: \"image\",\n          payload: {\n            url: \"http://instomeal.com/static/chef_photos/10.jpg\"\n          }\n        }\n\n      }\n    }\n  };\n\n  fbReq(opts, function (err, resp, data) {\n    if (cb) {\n      cb(err || data.error && data.error.message, data);\n    }\n  });\n};\n\nconst fbButtonMessage = function (recipientId, msg, cb) {\n  const opts = {\n    form: {\n      recipient: {\n        id: recipientId\n      },\n      message: {\n        \"attachment\": {\n          \"type\": \"template\",\n          \"payload\": {\n            \"template_type\": \"button\",\n            \"text\": msg,\n            \"buttons\": [{\n              \"type\": \"web_url\",\n              \"url\": \"https://petersapparel.parseapp.com\",\n              \"title\": \"Show Website\"\n            }, {\n              \"type\": \"postback\",\n              \"title\": \"Start Chatting\",\n              \"payload\": \"Chatting\"\n            }]\n          }\n        }\n      }\n    }\n  };\n\n  fbReq(opts, (err, resp, data) => {\n    if (cb) {\n      cb(err || data.error && data.error.message, data);\n    }\n  });\n};\n// horizontal scroll msg\nconst fbGenericMessage = (recipientId, elements, cb) => {\n  const opts = {\n    form: {\n      recipient: {\n        id: recipientId\n      },\n      \"message\": {\n        \"attachment\": {\n          \"type\": \"template\",\n          \"payload\": {\n            \"template_type\": \"generic\",\n            \"elements\": elements\n          }\n        }\n      }\n    }\n  };\n\n  fbReq(opts, (err, resp, data) => {\n    if (cb) {\n      cb(err || data.error && data.error.message, data);\n    }\n  });\n};\n\n// See the Webhook reference\n// https://developers.facebook.com/docs/messenger-platform/webhook-reference\nconst getFirstMessagingEntry = body => {\n  const val = body.object === 'page' && body.entry && Array.isArray(body.entry) && body.entry.length > 0 && body.entry[0] && body.entry[0].messaging && Array.isArray(body.entry[0].messaging) && body.entry[0].messaging.length > 0 && body.entry[0].messaging[0];\n\n  return val || null;\n};\n\nmodule.exports = {\n  getFirstMessagingEntry: getFirstMessagingEntry,\n  fbMessage: fbMessage,\n  fbReq: fbReq,\n  fbImageMessage: fbImageMessage,\n  fbButtonMessage: fbButtonMessage,\n  fbGenericMessage: fbGenericMessage\n};\n\n//# sourceMappingURL=facebook-compiled.js.map"]}