{"version":3,"sources":["request.js"],"names":[],"mappings":"AAAA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,SAAS,QAAQ,sBAAR,CAAb;AACA,SAAS,UAAT,CAAoB,GAApB,EAAwB,QAAxB,EAAkC;AAC9B,YAAQ,IAAR,CACI,yCADJ,EAEI,EAAC,MAAM,EAAC,SAAS,GAAV,EAAP,EAFJ,EAGI,UAAU,KAAV,EAAiB,QAAjB,EAA2B,IAA3B,EAAiC;AAC7B,YAAI,CAAC,KAAD,IAAU,SAAS,UAAT,IAAuB,GAArC,EAA0C;AACtC,mBAAO,KAAK,KAAL,CAAW,IAAX,CAAP;AACA,wBAAY,SAAS,IAAT,CAAZ;AACH;AACJ,KARL;AAUH;;;AAGD,MAAM,UAAU,oBAAhB;AACA,MAAM,UAAU;AACZ,qBAAiB,YAAY,OAAO,SADxB;AAEZ,cAAU,kBAFE;AAGZ,oBAAgB;AAHJ,CAAhB;;AAMA,SAAS,WAAT,CAAqB,OAArB,EAA6B,OAA7B,EAAqC,SAArC,EAA+C,QAA/C,EAAwD;;AAEpD;;AACA,QAAI,KAAK,gBAAgB,SAAzB;AACI,UAAM,aAAN;AACJ,QAAI,OAAJ,EAAa;AACT,cAAM,QAAQ,mBAAmB,OAAnB,CAAd;AACH;AACD,YAAQ,GAAR,CAAY,UAAU,YAAV,GAAyB,EAArC;AACA,YAAQ;AACJ,aAAK,UAAU,YAAV,GAAyB,EAD1B;AAEJ,gBAAQ,MAFJ;AAGJ,iBAAS,OAHL;AAIJ,cAAM,KAAK,SAAL,CAAe,OAAf;AAJF,KAAR,EAKG,UAAS,KAAT,EAAgB,QAAhB,EAA0B,IAA1B,EAA+B;AAC9B,YAAG,KAAH,EAAU;AACN,oBAAQ,GAAR,CAAY,KAAZ;AACH,SAFD,MAEO;AACH,oBAAQ,GAAR,CAAY,SAAS,UAArB,EAAiC,IAAjC;AACA,wBAAY,SAAS,IAAT,CAAZ;AACH;AACJ,KAZD;AAcH;;;;;;;;;AASD,OAAO,OAAP,GAAiB;AACb,gBAAW,UADE;AAEb,iBAAY;AAFC,CAAjB","file":"request-compiled.js","sourcesContent":["var request = require('request');\r\nvar consts = require('./../config/const.js')\r\nfunction spellCheck(msg,callback) {\r\n    request.post(\r\n        'http://172.31.17.225:1234/app1/spelling',\r\n        {form: {message: msg}},\r\n        function (error, response, body) {\r\n            if (!error && response.statusCode == 200) {\r\n                body = JSON.parse(body);\r\n                callback && callback(body);\r\n            }\r\n        }\r\n    );\r\n}\r\n//spellCheck(\"hi\");\r\n\r\nconst baseURL = 'https://api.wit.ai';\r\nconst headers = {\r\n    'Authorization': 'Bearer ' + consts.WIT_TOKEN,\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json',\r\n};\r\n\r\nfunction converseWit(context,message,sessionId,callback){\r\n\r\n    \"use strict\";\r\n    var qs = 'session_id=' + sessionId;\r\n        qs += '&v=20160526';\r\n    if (message) {\r\n        qs += '&q=' + encodeURIComponent(message);\r\n    }\r\n    console.log(baseURL + '/converse?' + qs);\r\n    request({\r\n        url: baseURL + '/converse?' + qs,\r\n        method: 'POST',\r\n        headers: headers,\r\n        body: JSON.stringify(context),\r\n    }, function(error, response, body){\r\n        if(error) {\r\n            console.log(error);\r\n        } else {\r\n            console.log(response.statusCode, body);\r\n            callback && callback(body);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n/*\r\nvar sample_context = {best : \"best\"};\r\nvar sessionId= \"123abc\";\r\nvar msg =\"best phone under 30k\"\r\nconverseWit(sample_context,msg,sessionId);\r\n*/\r\n\r\nmodule.exports = {\r\n    spellCheck:spellCheck,\r\n    converseWit:converseWit\r\n}\r\n\r\n//curl -XPOST 'https://api.wit.ai/converse?session_id=123abc&q=best%20phone%20under%2030k' -H \"Content-Type: application/json\" -H \"Accept: application/json\" -H 'Authorization: Bearer QYX4NYOZRG3BJR6AX6RXU4QU4W5X67FZ'"]}